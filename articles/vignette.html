<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>MplusAutomation Examples • MplusAutomation</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MplusAutomation Examples">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MplusAutomation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/submitModels.html">Submitting Many Mplus Models to an HPC with submitModels()</a></li>
    <li><a class="dropdown-item" href="../articles/vignette.html">MplusAutomation Examples</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/michaelhallquist/MplusAutomation/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>MplusAutomation Examples</h1>
                        <h4 data-toc-skip class="author">Michael N.
Hallquist</h4>
            
            <h4 data-toc-skip class="date">2025-11-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/michaelhallquist/MplusAutomation/blob/master/vignettes/vignette.Rmd" class="external-link"><code>vignettes/vignette.Rmd</code></a></small>
      <div class="d-none name"><code>vignette.Rmd</code></div>
    </div>

    
    
<!-- Note that I need to set the directory before building this file, but shouldn't set it using setwd -->
<!-- because then CRAN maintainers can't link to the same directory. -->
<!-- setwd(file.path(getMainDir(), "MplusAutomation/pkg/inst/doc")) -->
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This guide provides examples of how to use the functions in the
<code>MplusAutomation</code> package. The package is designed to
automate three major aspects of latent variable modeling in
<code>Mplus</code>:</p>
<ol style="list-style-type: decimal">
<li>creating related groups of models</li>
<li>running batches of models</li>
<li>extracting and comparing model parameters and fit statistics</li>
</ol>
<p>The guide tries to make few assumptions about the user’s familiarity
with the <code>R</code> environment, as many Mplus user’s may be
unfamiliar with <code>R</code>. Note that the
<code>MplusAutomation</code> package was written to be compatible with
Mplus version 5.21 or later. Although many functions are likely to work
with earlier versions, there may be incompatibilities.</p>
<p>Note: some examples herein reference examples from the Mplus User’s
Guide. The input and output files for these examples are assumed to
reside in the directory:</p>
<p><code>C:\Program Files\Mplus\Mplus Examples\User's Guide Examples</code></p>
<p>If you have installed Mplus to a different location, please use the
correct directory in the code below.</p>
<div class="section level3">
<h3 id="clarifying-the-relationship-between-mplusautomation-and-mplus">Clarifying the relationship between MplusAutomation and Mplus<a class="anchor" aria-label="anchor" href="#clarifying-the-relationship-between-mplusautomation-and-mplus"></a>
</h3>
<p>Please note that <code>MplusAutomation</code> does not provide a copy
of the <code>Mplus</code> software, which is proprietary. All of the
model estimation is handled by <code>Mplus</code> (think of it as the
computation engine), while <code>MplusAutomation</code> provides
convenience functions for interfacing with <code>Mplus</code> in
<code>R</code> and working with model outputs using familiar
<code>R</code> data structures such as <code>data.frame</code>
objects.</p>
<p>Thus, you must have a working copy of <code>Mplus</code> to estimate
latent variable models using <code>MplusAutomation</code> using the
<code><a href="../reference/runModels.html">runModels()</a></code> or <code><a href="../reference/mplusModeler.html">mplusModeler()</a></code> functions. If
you would like to obtain a copy of <code>Mplus</code>, please follow the
instructions on the <a href="http://statmodel.com/orderonline/" class="external-link">statmodel.com website</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="installing-and-loading-the-package">Installing and loading the package<a class="anchor" aria-label="anchor" href="#installing-and-loading-the-package"></a>
</h2>
<p><strong>Note</strong>: You only need to install the
<code>MplusAutomation</code> package <em>once</em> on a given machine.
Once you follow these instructions, you can just use
<code><a href="https://michaelhallquist.github.io/MplusAutomation/">library(MplusAutomation)</a></code> to load the package in future
sessions.</p>
<p>The <code>MplusAutomation</code> package is compatible with
<code>R</code> and <code>Mplus</code> on Windows, Mac OS X, and Linux
platforms.</p>
<p>The package was initially built using <code>R</code> 2.15.1 and has
been tested with modern versions up through <code>R</code> 4.3.2. To
obtain <code>R</code> follow <a href="https://cran.r-project.org/" class="external-link">this
link</a>.</p>
<p>After installing <code>R</code> and launching a new session, type the
following at the command line:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"MplusAutomation"</span><span class="op">)</span></span></code></pre></div>
<p>If you’re running on Windows, you may need to run <code>R</code> as
an administrator (right-click, Run as administrator).</p>
<p>To load the <code>MplusAutomation</code> package so that its
functions are available to use, type:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://michaelhallquist.github.io/MplusAutomation/">MplusAutomation</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Version:  1.2</span></span>
<span><span class="co">## We work hard to write this free software. Please help us get credit by citing: </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Hallquist, M. N. &amp; Wiley, J. F. (2018). MplusAutomation: An R Package for Facilitating Large-Scale Latent Variable Analyses in Mplus. Structural Equation Modeling, 25, 621-638. doi: 10.1080/10705511.2017.1402334.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## -- see citation("MplusAutomation").</span></span></code></pre>
<p><strong>Note:</strong> Mac users using versions of <code>R</code>
<em>prior to</em> 4.0.0 may experiences crashes if they have not setup
Tcl/Tk properly within <code>R</code>. The default distribution of
Tcl/Tk shipped with Mac OS X is not compatible with <code>R</code>.
Instead, users should download and install the Tcl/Tk distribution <a href="https://cran.r-project.org/bin/macosx/tools/" class="external-link">here</a>.</p>
<div class="section level3">
<h3 id="determine-the-version-of-mplusautomation-on-your-machine">Determine the version of <code>MplusAutomation</code> on your
machine<a class="anchor" aria-label="anchor" href="#determine-the-version-of-mplusautomation-on-your-machine"></a>
</h3>
<p>To verify the version of <code>MplusAutomation</code> loaded in your
<code>R</code> session, type the following code which should provide a
listing of all loaded packages.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## R version 4.5.2 (2025-10-31)</span></span>
<span><span class="co">## Platform: x86_64-pc-linux-gnu</span></span>
<span><span class="co">## Running under: Ubuntu 24.04.3 LTS</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: UTC</span></span>
<span><span class="co">## tzcode source: system (glibc)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">## [1] MplusAutomation_1.2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##  [1] gtable_0.3.6       jsonlite_2.0.0     compiler_4.5.2     Rcpp_1.1.0        </span></span>
<span><span class="co">##  [5] parallel_4.5.2     jquerylib_0.1.4    systemfonts_1.3.1  scales_1.4.0      </span></span>
<span><span class="co">##  [9] textshaping_1.0.4  boot_1.3-32        yaml_2.3.10        fastmap_1.2.0     </span></span>
<span><span class="co">## [13] lattice_0.22-7     coda_0.19-4.1      ggplot2_4.0.1      R6_2.6.1          </span></span>
<span><span class="co">## [17] plyr_1.8.9         knitr_1.50         backports_1.5.0    checkmate_2.3.3   </span></span>
<span><span class="co">## [21] pander_0.6.6       gsubfn_0.7         proto_1.0.0        desc_1.4.3        </span></span>
<span><span class="co">## [25] bslib_0.9.0        RColorBrewer_1.1-3 rlang_1.1.6        cachem_1.1.0      </span></span>
<span><span class="co">## [29] xfun_0.54          fs_1.6.6           sass_0.4.10        S7_0.2.1          </span></span>
<span><span class="co">## [33] cli_3.6.5          pkgdown_2.2.0      fastDummies_1.7.5  digest_0.6.39     </span></span>
<span><span class="co">## [37] grid_4.5.2         xtable_1.8-4       texreg_1.39.4      lifecycle_1.0.4   </span></span>
<span><span class="co">## [41] vctrs_0.6.5        evaluate_1.0.5     glue_1.8.0         data.table_1.17.8 </span></span>
<span><span class="co">## [45] farver_2.1.2       ragg_1.5.0         rmarkdown_2.30     httr_1.4.7        </span></span>
<span><span class="co">## [49] tools_4.5.2        htmltools_0.5.8.1</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="updating-the-package-to-the-latest-version">Updating the package to the latest version<a class="anchor" aria-label="anchor" href="#updating-the-package-to-the-latest-version"></a>
</h3>
<p>As is conventional for <code>R</code> packages, the latest version of
<code>MplusAutomation</code> may be obtained from CRAN using the
<code><a href="https://rdrr.io/r/utils/update.packages.html" class="external-link">update.packages()</a></code> function in an <code>R</code> session. As
of 2025-11-20, the current version of the package is 1.2.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/update.packages.html" class="external-link">update.packages</a></span><span class="op">(</span>ask<span class="op">=</span><span class="cn">FALSE</span>, checkBuilt<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="exporting-data-from-r-to-mplus">Exporting data from <code>R</code> to Mplus<a class="anchor" aria-label="anchor" href="#exporting-data-from-r-to-mplus"></a>
</h2>
<p>The helper function, <code><a href="../reference/prepareMplusData.html">prepareMplusData()</a></code>, eases the task
of transferring data from <code>R</code> to Mplus. Mplus requires that
files not have a header row and that the variable names be specified
within the Mplus input syntax. The <code><a href="../reference/prepareMplusData.html">prepareMplusData()</a></code>
function converts an <code>R</code> <code>data.frame</code> object (the
typical way to represent two-dimensional data in <code>R</code>) to a
tab-delimited file and it prints the corresponding Mplus syntax to the
console. This syntax can then be pasted into the head of a new Mplus
input file. Here are two basic examples of using the command:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prepareMplusData.html">prepareMplusData</a></span><span class="op">(</span></span>
<span>  <span class="va">my_data</span>,</span>
<span>  filename <span class="op">=</span> <span class="st">"C:/Data_Analysis/Prepare Mplus.dat"</span>,</span>
<span>  keepCols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"item1"</span>, <span class="st">"item3"</span>, <span class="st">"item6"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/prepareMplusData.html">prepareMplusData</a></span><span class="op">(</span></span>
<span>  <span class="va">my_other_data</span>,</span>
<span>  filename <span class="op">=</span> <span class="st">"C:/Data_Analysis/Prepare Dropped Mplus.dat"</span>,</span>
<span>  dropCols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"baditem1"</span>, <span class="st">"baditem2"</span>, <span class="st">"baditem7"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The first call requests that only the variables specified by
<code>keepCols</code> be included in the resultant Mplus data file. In
like manner, the second call requests that all variables except those
specified by <code>dropCols</code> by included in the data file. If
neither <code>keepCols</code> nor <code>dropCols</code> is specified,
then the entire <code>data.frame</code> is output.</p>
<p>For factors and character variables (categorical),
<code>prepareMplusData</code> converts each level into an integer value
(first level = 1, second level = 2, etc.) and prints out information
about how the levels were converted so that you can use them properly
inside the Mplus syntax. Alternatively, if you use the
<code>dummyCode</code> argument for <code>prepareMplusData</code>, you
will get a set of dummy codes that can be used in the Mplus syntax.</p>
<p>Here, in the <code>mtcars</code> dataset, we convert the number of
gears (in the car) to a factor so that <code>prepareMplusData</code>
will know to convert its unique values (3, 4, 5) into an integer-valued
variable (1, 2, 3) that can be used in <code>Mplus</code> syntax. For
the number of cylinders (<code>cyl</code>) and transmission type
(<code>am</code>), we ask <code>prepareMplusData</code> to generate
dummy codes for each level of these factors. Note that one dummy code is
returned for <em>each level</em>, so no reference category is implied.
Thus, it is up to you to drop one of the dummy codes in the Mplus syntax
to denote the reference category and avoid multicollinearity.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="va">mtcars</span><span class="op">$</span><span class="va">gear</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">gear</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/prepareMplusData.html">prepareMplusData</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"mtcars.dat"</span>, dummyCode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cyl"</span>, <span class="st">"am"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Converting the following variables to dummy codes: cyl, am</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## -----</span></span>
<span><span class="co">## Factor: gear </span></span>
<span><span class="co">## Conversion:</span></span>
<span><span class="co">##  level number</span></span>
<span><span class="co">##      3      1</span></span>
<span><span class="co">##      4      2</span></span>
<span><span class="co">##      5      3</span></span>
<span><span class="co">## -----</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="running-batches-of-mplus-models">Running batches of Mplus models<a class="anchor" aria-label="anchor" href="#running-batches-of-mplus-models"></a>
</h2>
<p>A major purpose of the MplusAutomation package is to allow for easy
runs of batches/groups of Mplus models. Oftentimes, one wants to compare
a group of related models, such as testing for different forms of
measurement invariance. Depending on the complexity of the models, Mplus
can take several minutes to many hours to run each model. The routine is
designed to run a group of related models located within a directory (or
nested subdirectories).</p>
<div class="section level3">
<h3 id="basic-use-of-runmodels">Basic use of runModels<a class="anchor" aria-label="anchor" href="#basic-use-of-runmodels"></a>
</h3>
<p>As an example, say that we want to run all of the models used in the
Mplus 5.1 Addendum: <a href="http://statmodel.com/download/examples1.pdf" class="external-link uri">http://statmodel.com/download/examples1.pdf</a>. The input
files for these are located in:
<code>C:\Program Files\Mplus\Mplus Examples\Addendum Examples</code>.</p>
<p>To run this batch, enter this at the command line:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/runModels.html">runModels</a></span><span class="op">(</span><span class="st">"C:/Program Files/Mplus/Mplus Examples/Addendum Examples"</span><span class="op">)</span></span></code></pre></div>
<p>Note that you need to use forward slashes (“/”), not backslashes in
the path name. Alternatively, you could use double backslashes (e.g.,
<code>"C:\\Program Files"</code> etc.).</p>
</div>
<div class="section level3">
<h3 id="advanced-use-of-runmodels">Advanced use of runModels<a class="anchor" aria-label="anchor" href="#advanced-use-of-runmodels"></a>
</h3>
<div class="section level4">
<h4 id="recursing-through-subdirectories">Recursing through subdirectories<a class="anchor" aria-label="anchor" href="#recursing-through-subdirectories"></a>
</h4>
<p>Sometimes it is useful to organize models into one or more
subdirectories where each subdirectory contains models for a particular
outcome or analytic approach. For example, if one were contrasting
latent class analysis (LCA) with confirmatory factor analysis (CFA), one
could place all LCA models in a single directory and place CFA models in
a different directory. This might yield a file structure like this:</p>
<pre><code>ComparingLCAvCFA/LCA/1-class LCA.inp
ComparingLCAvCFA/LCA/2-class LCA.inp
ComparingLCAvCFA/LCA/3-class LCA.inp

ComparingLCAvCFA/CFA/1-factor CFA.inp
ComparingLCAvCFA/CFA/2-factor CFA.inp
ComparingLCAvCFA/CFA/3-factor CFA.inp</code></pre>
<p>In this case, all Mplus files for the larger project are housed
within a parent directory, <code>ComparingLCAvCFA</code>. To run all
models within <code>ComparingLCAvCFA</code>, including models within any
subdirectories (including <code>LCA</code> and <code>CFA</code>), use
the <code>recursive</code> parameter of <code>runModels</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/runModels.html">runModels</a></span><span class="op">(</span></span>
<span>  <span class="st">"C:/Data_Analysis/ComparingLCAvCFA"</span>,</span>
<span>  recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="logging-the-outcome-of-runmodels">Logging the outcome of runModels<a class="anchor" aria-label="anchor" href="#logging-the-outcome-of-runmodels"></a>
</h4>
<p>The <code>logFile</code> parameter of <code>runModels</code> allows
the user to specify a text file containing the results of
<code>runModels</code>. Included in the log file are the parameters
passed to the function, the date when the batch started, which models
were run (and which were skipped), and any actions taken if the
<code>R</code> process was interrupted (e.g., terminating the Mplus
process). By default, <code><a href="../reference/runModels.html">runModels()</a></code> will create a log file in
the same directory as the models to be run, <code>directory</code>,
called <code>Mplus Run Models.log</code>. To change the name or location
of this file, specify the <code>logFile</code> parameter, such as in
this example:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">runModels</span>(</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="st">"C:/Data_Analysis/ComparingLCAvCFA"</span>,</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="at">recursive=</span><span class="cn">TRUE</span>,</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="at">logFile=</span><span class="st">"C:/CFALCA-Comparison-Log.txt"</span>)<span class="sc">|</span></span></code></pre></div>
<p>Here, the file <code>C:/CFALCA-Comparison-Log.txt</code> will be
created in the directory <code>C:/</code>.</p>
<p>To specify that no log file should be created, pass
<code>logFile=NULL</code> to <code><a href="../reference/runModels.html">runModels()</a></code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/runModels.html">runModels</a></span><span class="op">(</span></span>
<span>  <span class="st">"C:/Data_Analysis/ComparingLCAvCFA"</span>,</span>
<span>  recursive<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  logFile<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="skipping-models-with-existing-output-files">Skipping models with existing output files<a class="anchor" aria-label="anchor" href="#skipping-models-with-existing-output-files"></a>
</h4>
<p>Sometimes it is useful to skip models that have already been run to
avoid the computing time associated with running all input files within
a directory. The parameter allows one to specify which models should be
re-run, where models that have an output with the same filename as the
input file are considered to have been run. By default,
<code>replaceOutfile="always"</code>, meaning that all input files will
be run, regardless of whether they have a matching output file.</p>
<p>To skip any model that already has an existing output file, pass
<code>replaceOutfile="never"</code> to <code><a href="../reference/runModels.html">runModels()</a></code>, such as
in this example:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/runModels.html">runModels</a></span><span class="op">(</span></span>
<span>  <span class="st">"C:/Data_Analysis/ComparingLCAvCFA"</span>,</span>
<span>  recursive<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  replaceOutfile<span class="op">=</span><span class="st">"never"</span><span class="op">)</span></span></code></pre></div>
<p>Oftentimes, after a model or group of models has been run, it is
necessary to modify some aspects of the parameterization to improve
model fit or address estimation problems. In such cases, output files
are inspected and the corresponding input files are modified. In such
cases, one may only want to run models that have been updated, but not
to re-run models that completed successfully. This can be accomplished
by passing <code>replaceOutfile="modifiedDate"</code> to
<code><a href="../reference/runModels.html">runModels()</a></code>. The <code>"modifiedDate"</code> determines
whether there is an existing output file for a given input file. If
there is, it checks to see whether the date the input file was modified
is <em>newer</em> than the output file. If the input file is newer, then
the model is run. Otherwise, it is skipped. Here is an example:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/runModels.html">runModels</a></span><span class="op">(</span></span>
<span>  <span class="st">"C:/Data_Analysis/ComparingLCAvCFA"</span>,</span>
<span>  recursive<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  replaceOutfile<span class="op">=</span><span class="st">"modifiedDate"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="displaying-r-output-in-the-console">Displaying <code>R</code> output in the console<a class="anchor" aria-label="anchor" href="#displaying-r-output-in-the-console"></a>
</h4>
<p>When models are run by the Mplus Windows program (MplusWin.exe), a
separate DOS window appears that documents the TECH8 progress of the
model, which represents the progress toward maximum-likelihood
convergence for the model (including random starts and final stage
optimizations for some models). To display the same TECH8 output for
models run by <code><a href="../reference/runModels.html">runModels()</a></code>, pass
<code>showOutput=TRUE</code> to the <code><a href="../reference/runModels.html">runModels()</a></code>
function.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/runModels.html">runModels</a></span><span class="op">(</span></span>
<span>  <span class="st">"C:/Data_Analysis/ComparingLCAvCFA"</span>,</span>
<span>  recursive<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  showOutput<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>If the <code>R</code> session was started through the <code>R</code>
GUI (Rgui.exe), the output will be displayed within the <code>R</code>
window. If the <code>R</code> session was started using Rterm (the
terminal), a separate DOS window will display the output, as occurs
using the built-in Mplus Windows program.</p>
<p>By default, the output is not shown,
<code>showOutput=FALSE</code>.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="user-friendly-interface-to-runmodels">User-friendly interface to <code>runModels()</code><a class="anchor" aria-label="anchor" href="#user-friendly-interface-to-runmodels"></a>
</h2>
<p>A wrapper function, <code><a href="../reference/runModels_Interactive.html">runModels_Interactive()</a></code>, is included
in the <code>MplusAutomation package</code>, which provides a simple
dialog box for specifying which models to run. To start the interface,
type the following:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/runModels_Interactive.html">runModels_Interactive</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The picture below documents the appearance of this interface:</p>
<div class="figure">
<img src="runModels_Interactive-Screenshot.png" class="r-plt" alt="Figure. Example of using runModels() in an interactive graphical interface." width="80%"><p class="caption">
Figure. Example of using runModels() in an interactive graphical
interface.
</p>
</div>
<p>Although one can provide parameters to the function to set the
initial states of the interface, it is rarely necessary to do so, so the
syntax above should suffice.</p>
</div>
<div class="section level2">
<h2 id="readmodels-extracting-all-supported-data-from-mplus-output">
<code>readModels()</code>: Extracting all supported data from Mplus
output<a class="anchor" aria-label="anchor" href="#readmodels-extracting-all-supported-data-from-mplus-output"></a>
</h2>
<p>The <code><a href="../reference/readModels.html">readModels()</a></code> function provides a single method for
extracting all available information (that MplusAutomation currently
handles) from one or more output files. This is the preferred method for
extracting information from Mplus output files. The
<code><a href="../reference/readModels.html">readModels()</a></code> function also uses a number of additional
functions not accessible to the user to read output such as TECH1,
TECH3, TECH4, TECH9, and RESIDUALS. The <code><a href="../reference/readModels.html">readModels()</a></code>
function extracts model summaries, parameters, modification indices, and
saved data (using the Mplus SAVEDATA syntax), into a single list object
(stored as <code>mplus.model</code>). The top-level elements of the list
represent distinct output files and are named by the corresponding Mplus
output filename. Each <code>mplus.model</code> element of the list is
composed of several sub-elements, depending on the information in the
output file. Elements of an <code>mplus.model</code> object include:</p>
<ol style="list-style-type: decimal">
<li>
<code>input</code>: Mplus input syntax parsed into a list by major
section</li>
<li>
<code>warnings</code>: Syntax and estimation warnings as a list</li>
<li>
<code>errors</code>: Syntax and estimation errors as a list</li>
<li>
<code>data_summary</code>: Output of SUMMARY OF DATA section,
including cluster sizes and ICCs</li>
<li>
<code>sampstat</code>: Sample statistics provided by OUTPUT:
SAMPSTAT, if specified</li>
<li>
<code>covariance_coverage</code>: Covariance coverage matrix for
checking missingness patterns</li>
<li>
<code>summaries</code>: model summary statistics</li>
<li>
<code>parameters</code>: model parameter estimates</li>
<li>
<code>class_counts</code>: class counts and proportions for models
that include a categorical latent variable.</li>
<li>
<code>indirect</code>: Output of MODEL INDIRECT if available in
output. Contains <code>$overall</code> and <code>$specific</code>
data.frames for each indirect effect section</li>
<li>
<code>mod_indices</code>: model modification indices</li>
<li>
<code>residuals</code>: a list containing relevant information from
OUTPUT: RESIDUALS.</li>
<li>
<code>savedata_info</code>: information about SAVEDATA output
corresponding to this model</li>
<li>
<code>savedata</code>: <code>data.frame</code> corresponding to
SAVEDATA: FILE = …</li>
<li>
<code>bparameters</code>: an <code>mcmc.list</code> object
containing the draws from the MCMC chains for a Bayesian model that uses
the SAVEDATA: BPARAMETERS command</li>
<li>
<code>tech1</code>: a list containing parameter specification and
starting values from OUTPUT: TECH1.</li>
<li>
<code>tech3</code>: a list containing parameter covariance and
correlation matrices from OUTPUT: TECH3.</li>
<li>
<code>tech4</code>: a list containing means, covariances, and
correlations for latent variables from OUTPUT: TECH4.</li>
<li>
<code>tech7</code>: a list containing sample statistics for each
latent class from OUTPUT: TECH7</li>
<li>
<code>tech8</code>: a list containing optimization history of the
model. Currently only supports potential scale reduction in BAYES.
OUTPUT: TECH8</li>
<li>
<code>tech9</code>: a list containing error messages for each
replication of a Monte Carlo simulation study from OUTPUT: TECH9.</li>
<li>
<code>tech10</code>: a list containing model fit information from
OUTPUT: TECH10</li>
<li>
<code>tech12</code>: a list containing observed versus estimated
sample statistics for TYPE=MIXTURE analyses from OUTPUT: TECH12</li>
<li>fac_score_stats: factor score mean, correlation, and covariance
structure from SAMPLE STATISTICS FOR ESTIMATED FACTOR SCORES
section</li>
<li>
<code>lcCondMeans</code>: conditional latent class means, obtained
using auxiliary(e) syntax in latent class models</li>
<li>
<code>gh5</code>: a list containing data from the gh5 (graphics)
file corresponding to this output. (Requires <code>rhdf5</code>
package).</li>
<li>
<code>output</code>: The entire output file as text</li>
</ol>
<p>Basic example:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allOutput</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readModels.html">readModels</a></span><span class="op">(</span></span>
<span>  <span class="st">"C:/Data_Files/CFANesting"</span>,</span>
<span>  recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## assuming there are multiple files in this directory</span></span>
<span><span class="co">## just model summaries could retained as a data.frame as follows:</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://had.co.nz/plyr" class="external-link">plyr</a></span><span class="op">)</span></span>
<span><span class="va">justSummaries</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="st">"rbind.fill"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">allOutput</span>,<span class="st">"["</span>, <span class="st">"summaries"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The <code>rbind.fill</code> function is provided by the
<code>plyr</code> package and is used to combine
<code>data.frame</code>s where the columns do not align perfectly (as
happens when Mplus output files differ in the form of their summary
statistics). The sapply call is used to extract only the
<code>summaries</code> element from each top-level element (i.e.,
file).</p>
</div>
<div class="section level2">
<h2 id="extracting-model-summary-statistics">Extracting model summary statistics<a class="anchor" aria-label="anchor" href="#extracting-model-summary-statistics"></a>
</h2>
<p>Another major purpose of the package is to allow for easy extraction
of model summary statistics from one or more models. Such summary
statistics include items such as log-likelihood values, root mean
squared error of approximation (RMSEA), and Akaike’s Information
(AIC).</p>
<p>The <code><a href="../reference/readModels.html">readModels()</a></code> function extracts these summary
statistics along with other information from Mplus output. If only
summaries are required, specify <code>what = "summaries"</code>;
otherwise, read all sections and then access the <code>$summaries</code>
element of the returned list:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mlist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readModels.html">readModels</a></span><span class="op">(</span></span>
<span>  <span class="st">"C:/Data_Analysis/ComparingLCAvCFA"</span>,</span>
<span>  recursive <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"summaries"</span><span class="op">)</span></span>
<span><span class="va">mySummaries</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="st">"rbind.fill"</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">mlist</span>, <span class="st">"["</span>, <span class="st">"summaries"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>As with <code><a href="../reference/runModels.html">runModels()</a></code>, <code><a href="../reference/readModels.html">readModels()</a></code> includes
<code>recursive</code> and <code>filefilter</code> parameters to control
which output files are parsed. The <code>filefilter</code> parameter
accepts a Perl-compatible regular expression. Note that backslashes used
in regular expressions must be doubled inside <code>R</code> strings
(i.e., <code>\\</code>).</p>
<p>Here is an example of filtering only files that match “ex4” followed
by any characters. The function automatically searches only files with
the <code>.out</code> extension, so it is not necessary to include
<code>.out</code> in the file filter.</p>
<p>Here is a more complex filter that matches filenames that begin with
the digits 1, 2, or 3 (for 1-class, 2-class, or 3-class output files)
and also contain the text “Threshold”:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mlist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readModels.html">readModels</a></span><span class="op">(</span></span>
<span>  <span class="st">"C:/Data_Analysis/Multiclass Models"</span>,</span>
<span>  filefilter <span class="op">=</span> <span class="st">"[123]{1}-class.*Threshold.*"</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"summaries"</span><span class="op">)</span></span>
<span><span class="va">summaryStats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="st">"rbind.fill"</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">mlist</span>, <span class="st">"["</span>, <span class="st">"summaries"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="listing-of-summary-statistics-extracted-by-readmodels">Listing of summary statistics extracted by readModels<a class="anchor" aria-label="anchor" href="#listing-of-summary-statistics-extracted-by-readmodels"></a>
</h3>
<p>As of this version of the package (0.5), the following summary
statistics are automatically extracted, when available:</p>
<ul>
<li>
<code>Title</code>: Title for the model, specified by the TITLE:
command</li>
<li>
<code>Filename</code>: Filename of the output file</li>
<li>
<code>InputInstructions</code>: A string containing the full input
syntax for the model</li>
<li>
<code>Estimator</code>: Estimator used for the model (e.g., ML, MLR,
WLSMV, etc.)</li>
<li>
<code>LL</code>: Log-likelihood of the model</li>
<li>
<code>BIC</code>: Bayesian Information Criterion</li>
<li>
<code>aBIC</code>: Sample-Size-Adjusted BIC (Sclove, 1987)</li>
<li>
<code>AIC</code>: Akaike’s Information Criterion</li>
<li>
<code>AICC</code>: Corrected AIC, based on Sugiura (1978) and
recommended by Burnham &amp; Anderson (2002)</li>
<li>
<code>DIC</code>: Deviance Information Criterion. Available in
ESTIMATOR=BAYES output.</li>
<li>
<code>Parameters</code>: Number of parameters estimated by the
model</li>
<li>
<code>pD</code>: Estimated number of parameters in Bayesian
output</li>
<li>
<code>Observations</code>: The number of observations for the model
(does not suppport multiple-groups analysis at this time)</li>
<li>
<code>CFI</code>: Confirmatory Fit Index</li>
<li>
<code>TLI</code>: Tucker-Lewis Index</li>
<li>
<code>RMSEA_Estimate</code>: Point estimate of root mean squared
error of approximation</li>
<li>
<code>RMSEA_90CI_LB</code>: Lower bound of the 90% Confidence
Interval around the RMSEA estimate</li>
<li>
<code>RMSEA_90CI_UB</code>: Upper bound of the 90% Confidence
Interval around the RMSEA estimate</li>
<li>
<code>RMSEA_pLT05</code>: Probability that the RMSEA estimate falls
below .05, indicating good fit</li>
<li>
<code>ChiSqM_Value</code>: Model chi-squared value</li>
<li>
<code>ChiSqM_DF</code>: Model chi-squared degrees of freedom</li>
<li>
<code>ChiSqM_PValue</code>: Model chi-squared p value</li>
<li>
<code>ObsRepChiSqDiff_95CI_LB</code>: Lower bound of 95% confidence
interval for the difference between observed and replicated chi-square
values</li>
<li>
<code>ObsRepChiSqDiff_95CI_UB</code>: Upper bound of 95% confidence
interval for the difference between observed and replicated chi-square
values</li>
<li>
<code>PostPred_PValue</code>: Posterior predictive p-value</li>
<li>
<code>BLRT_KM1LL</code>: Log-likelihood of the K-1 model (one less
class) for the Bootstrapped Likelihood Ratio Test (TECH14)</li>
<li>
<code>BLRT_PValue</code>: P-value of the Bootstrapped Likelihood
Ratio Test (TECH14) testing whether the K class model is significantly
better than K-1</li>
<li>
<code>BLRT_Numdraws</code>: The number of bootstrapped samples used
in the Bootstrapped Likelihood Ratio Test</li>
<li>
<code>SRMR</code>: Standardized root mean square residual</li>
<li>
<code>WRMR</code>: Weighted root mean square residual</li>
<li>
<code>ChiSqBaseline_Value</code>: Baseline (unstructured)
chi-squared value</li>
<li>
<code>ChiSqBaseline_DF</code>: Baseline (unstructured) chi-squared
degrees of freedom</li>
<li>
<code>ChiSqBaseline_PValue</code>: Baseline (unstructured)
chi-squared p value</li>
<li>
<code>NumFactors</code>: For TYPE=EFA output, the number of
factors</li>
<li>
<code>T11_KM1Starts</code>: TECH11: Number of initial stage random
starts for k-1 model</li>
<li>
<code>T11_KM1Final</code>: TECH11: Number of final stage
optimizations for k-1 model</li>
<li>
<code>T11_KM1LL</code>: TECH11: Log-likelihood of the K-1 model used
for the Vuong-Lo-Mendell-Rubin LRT</li>
<li>
<code>T11_VLMR_2xLLDiff</code>: TECH11: 2 * Log-likelihood
Difference of K-class vs. K-1-class model for the Vuong-Lo-Mendell-Rubin
LRT</li>
<li>
<code>T11_VLMR_ParamDiff</code>: TECH11: Difference in number of
parameters between K-class and K-1-class model for the
Vuong-Lo-Mendell-Rubin LRT</li>
<li>
<code>T11_VLMR_Mean</code>: TECH11: Vuong-Lo-Mendell-Rubin LRT
mean</li>
<li>
<code>T11_VLMR_SD</code>: TECH11: Vuong-Lo-Mendell-Rubin LRT
standard deviation</li>
<li>
<code>T11_VLMR_PValue</code>: TECH11: Vuong-Lo-Mendell-Rubin LRT
p-value</li>
<li>
<code>T11_LMR_Value</code>: TECH11: Lo-Mendell-Rubin Adjusted LRT
value</li>
<li>
<code>T11_LMR_PValue</code>: TECH11: Lo-Mendell-Rubin Adjusted LRT
p-value</li>
</ul>
<p>These summary statistics can be used in conjunction with functions
that generate tables of model fit information (see below).</p>
</div>
</div>
<div class="section level2">
<h2 id="summarizing-model-fit-statistics-in-tabular-form">Summarizing model fit statistics in tabular form<a class="anchor" aria-label="anchor" href="#summarizing-model-fit-statistics-in-tabular-form"></a>
</h2>
<p>Once summary statistics for a group of models have been extracted, it
is often useful to display them in tabular form to compare fit among
models, sorted by a particular criterion (e.g., AIC).</p>
<p>The <code>MplusAutomation</code> package provides three routines for
tabulating model summary statistics. At this time, there are three
table-generating functions, which are detailed below:
<code><a href="../reference/showSummaryTable.html">showSummaryTable()</a></code>, <code><a href="../reference/HTMLSummaryTable.html">HTMLSummaryTable()</a></code>,
<code><a href="../reference/LatexSummaryTable.html">LatexSummaryTable()</a></code>.</p>
<p>As their names suggest, these functions can create tables for
on-screen display (<code><a href="../reference/showSummaryTable.html">showSummaryTable()</a></code>), as an HTML file
containing the table (<code><a href="../reference/HTMLSummaryTable.html">HTMLSummaryTable()</a></code>), or as a
LaTex-formatted table (<code><a href="../reference/LatexSummaryTable.html">LatexSummaryTable()</a></code> ).</p>
<div class="section level3">
<h3 id="displaying-the-summary-table-on-the-screen">Displaying the summary table on the screen<a class="anchor" aria-label="anchor" href="#displaying-the-summary-table-on-the-screen"></a>
</h3>
<p>The <code><a href="../reference/showSummaryTable.html">showSummaryTable()</a></code> function is designed to display a
summary table of model fit statistics on the screen. The function
expects a model list created by <code><a href="../reference/readModels.html">readModels()</a></code> and allows the
user to specify which columns should be included in the table.</p>
<p>Here is a simple example of using <code><a href="../reference/showSummaryTable.html">showSummaryTable()</a></code> by
specifying which columns to keep in the table:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/showSummaryTable.html">showSummaryTable</a></span><span class="op">(</span></span>
<span>  <span class="va">summaryStats</span>,</span>
<span>  keepCols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Title"</span>, <span class="st">"LL"</span>, <span class="st">"AIC"</span>, <span class="st">"BIC"</span>, <span class="st">"CFI"</span><span class="op">)</span>,</span>
<span>  sortBy <span class="op">=</span> <span class="st">"AIC"</span><span class="op">)</span></span></code></pre></div>
<p>And another example specifying that all columns in the model list
should be displayed <em>except</em> those specified:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/showSummaryTable.html">showSummaryTable</a></span><span class="op">(</span></span>
<span>  <span class="va">summaryStats</span>,</span>
<span>  dropCols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"InputInstructions"</span>, <span class="st">"Observations"</span>, <span class="st">"Parameters"</span><span class="op">)</span>,</span>
<span>  sortBy <span class="op">=</span> <span class="st">"CFI"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="creating-a-summary-table-in-html">Creating a summary table in HTML<a class="anchor" aria-label="anchor" href="#creating-a-summary-table-in-html"></a>
</h3>
<p>The <code><a href="../reference/HTMLSummaryTable.html">HTMLSummaryTable()</a></code> function creates an HTML file
containing a summary table of model fit statistics. Its syntax is very
similar to <code><a href="../reference/showSummaryTable.html">showSummaryTable()</a></code>, including parameters such as
<code>dropCols</code>, <code>keepCols</code>, and <code>sortBy</code>.
Two parameters distinguish it from other summary functions:
<code>filename</code> and <code>display</code>.</p>
<p>The <code>filename</code> parameter specifies the path and filename
of the HTML file to be created. <code>display</code> specifies whether
to display the HTML summary table in the web browser after it is
created. Here is a simple of using the function:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/HTMLSummaryTable.html">HTMLSummaryTable</a></span><span class="op">(</span></span>
<span>  <span class="va">summaryStats</span>,</span>
<span>  filename <span class="op">=</span> <span class="st">"C:/MyModelSummary.html"</span>,</span>
<span>  display <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  keepCols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Title"</span>, <span class="st">"LL"</span>, <span class="st">"AIC"</span>, <span class="st">"BIC"</span>, <span class="st">"AICC"</span><span class="op">)</span>,</span>
<span>  sortBy <span class="op">=</span> <span class="st">"AIC"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="creating-a-summary-table-in-latex">Creating a summary table in LaTeX<a class="anchor" aria-label="anchor" href="#creating-a-summary-table-in-latex"></a>
</h3>
<p>One major strength of <code>R</code> is its ability to be interwoven
with LaTeX, an advanced typesetting language. The most frequently used
approach for combining <code>R</code> and LaTex is Sweave (<a href="https://cran.r-project.org/doc/Rnews/Rnews_2002-3.pdf" class="external-link uri">https://cran.r-project.org/doc/Rnews/Rnews_2002-3.pdf</a>),
a built-in <code>R</code> function that runs <code>R</code> code
embedded in a LaTeX document, thereby permitting the creation of
advanced automated reports.</p>
<p>Mplus model fit summary tables can be formatted in LaTeX using the
<code><a href="../reference/LatexSummaryTable.html">LatexSummaryTable()</a></code> function. Unlike
<code><a href="../reference/showSummaryTable.html">showSummaryTable()</a></code> and <code><a href="../reference/HTMLSummaryTable.html">HTMLSummaryTable()</a></code>,
<code><a href="../reference/LatexSummaryTable.html">LatexSummaryTable()</a></code> returns a value, specifically the LaTeX
syntax for the summary table. Here is a simple example of the
function</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myLatexTable</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/LatexSummaryTable.html">LatexSummaryTable</a></span><span class="op">(</span></span>
<span>  <span class="va">summaryStats</span>,</span>
<span>  keepCols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Title"</span>, <span class="st">"BIC"</span>, <span class="st">"Parameters"</span><span class="op">)</span>,</span>
<span>  sortBy <span class="op">=</span> <span class="st">"Parameters"</span>,</span>
<span>  caption <span class="op">=</span> <span class="st">"Comparing CFA vs. LCA according to number of parameters"</span>,</span>
<span>  label<span class="op">=</span><span class="st">"CFALCATab"</span><span class="op">)</span></span></code></pre></div>
<p>Note that <code><a href="../reference/LatexSummaryTable.html">LatexSummaryTable()</a></code> supports two distinct
parameters relative to other summary table functions:
<code>caption()</code> and <code>label()</code>. These allow the user to
set the caption and label properties of the table, which are used in
LaTex for displaying a caption with the table and for allowing the table
to be easily referenced in other parts of document, respectively. See <a href="https://en.wikibooks.org/wiki/LaTeX/Tables#The_table_environment_-_captioning_etc" class="external-link uri">https://en.wikibooks.org/wiki/LaTeX/Tables#The_table_environment_-_captioning_etc</a>
for further details about LaTeX tables.</p>
<p>The LaTeX syntax for a summary table could be included in an Sweave
document in the following way:</p>
<pre><code>&lt;&lt;echo=TRUE, results=tex&gt;&gt;=

myLatexTable &lt;- LatexSummaryTable(
  summaryStats, 
  keepCols = c("Title", "BIC", "Parameters"), 
  sortBy = "Parameters", 
  caption = "Comparing CFA vs. LCA according to number of parameters", 
  label = "CFALCATab")

print(myLatexTable)
@
</code></pre>
<p>See the Sweave manual for more details about combining LaTeX with
<code>R</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="extracting-model-modification-indices">Extracting model modification indices<a class="anchor" aria-label="anchor" href="#extracting-model-modification-indices"></a>
</h2>
<p>The <code><a href="../reference/readModels.html">readModels()</a></code> function extracts the model
modification indices from the MODEL MODIFICATION INDICES sections of one
or more Mplus output files. It is up to the user to request modification
indices using OUTPUT: MODINDICES, and for some models, such indices are
not available, as noted in the WARNINGS section of the Mplus output.</p>
<p>Model modification indices are returned as a data.frame of the
form:</p>
<pre><code>modV1 operator modV2     MI    EPC Std_EPC StdYX_EPC
BORD1       ON BORD9 12.427 -0.284  -0.284    -0.231
BORD9     WITH BORD1 12.427 -0.053  -0.053    -0.222</code></pre>
<p>These columns follow the conventions used in Mplus where EPC refers
to the expected parameter change if the designated relationship is
estimated.</p>
<p>To obtain the modification indices, use <code><a href="../reference/readModels.html">readModels()</a></code> and
access the <code>$mod_indices</code> element:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readModels.html">readModels</a></span><span class="op">(</span><span class="st">"~/Mplus_Test.out"</span><span class="op">)</span></span>
<span><span class="va">my_model</span><span class="op">$</span><span class="va">mod_indices</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="extracting-model-parameters">Extracting model parameters<a class="anchor" aria-label="anchor" href="#extracting-model-parameters"></a>
</h2>
<p>The <code><a href="../reference/readModels.html">readModels()</a></code> function extracts the model parameters
from the MODEL RESULTS and STANDARDIZED MODEL RESULTS sections of a
given Mplus output file. Examples of such parameters include the
parameter estimate, standard error, parameter estimate divided by its
standard error, and the two-tailed p-value.</p>
<p><code><a href="../reference/readModels.html">readModels()</a></code> can process many output files, returning a
list with one element per file. When available, unstandardized and
standardized (StdYX, StdY, Std) parameters are extracted into nested
<code>data.frame</code> objects.</p>
<div class="section level3">
<h3 id="example-extracting-parameters-from-a-single-file">Example: Extracting parameters from a single file<a class="anchor" aria-label="anchor" href="#example-extracting-parameters-from-a-single-file"></a>
</h3>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">modelResults</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readModels.html">readModels</a></span><span class="op">(</span></span>
<span>  <span class="st">"C:/Data_Analysis/Mplus Output.out"</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"parameters"</span><span class="op">)</span><span class="op">$</span><span class="va">parameters</span></span></code></pre></div>
<p>The above call returns a list with unstandardized and standardized
results (if requested by including OUTPUT: STANDARDIZED in the Mplus
input). If all standardizations are available in the output, the
returned list will have the following elements:
<code>unstandardized</code>, <code>stdyx.standardized</code>,
<code>stdy.standardized</code>, and <code>std.standardized</code>. Each
of these elements is a <code>data.frame</code> containing model results
for the relevant section. Such elements may be accessed using
traditional <code>R</code> list operators, such as:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unstandardizedResults</span> <span class="op">&lt;-</span> <span class="va">modelResults</span><span class="op">$</span><span class="va">unstandardized</span></span>
<span></span>
<span><span class="co">#equivalently</span></span>
<span><span class="va">standardizedResults</span> <span class="op">&lt;-</span> <span class="va">modelResults</span><span class="op">[[</span><span class="st">"stdyx.standardized"</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-extracting-parameters-from-multiple-files">Example: Extracting parameters from multiple files<a class="anchor" aria-label="anchor" href="#example-extracting-parameters-from-multiple-files"></a>
</h3>
<p>By passing a directory to <code><a href="../reference/readModels.html">readModels()</a></code> with
<code>what = "parameters"</code>, parameters for all files in the
specified directory will be parsed and returned as a list, with one
element per file. The <code>recursive</code> parameter specifies whether
to parse files nested within subdirectories, and <code>filefilter</code>
specifies an optional Perl-compatible regular expression for parsing
only matching files within the target directory.</p>
<p>Say, for example, that there were two subdirectories within the
ComparingLCAvCFA directory with 3 outputs each. Note that this example
builds on the recursive <code><a href="../reference/runModels.html">runModels()</a></code> example above.</p>
<pre><code>ComparingLCAvCFA/LCA/1-class LCA.out
ComparingLCAvCFA/LCA/2-class LCA.out
ComparingLCAvCFA/LCA/3-class LCA.out

ComparingLCAvCFA/CFA/1-factor CFA.out
ComparingLCAvCFA/CFA/2-factor CFA.out
ComparingLCAvCFA/CFA/3-factor CFA.out</code></pre>
<p>Then the following code would extract model parameters for all files
in the directory structure, returning each output as a list element.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allModelParameters</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readModels.html">readModels</a></span><span class="op">(</span></span>
<span>  <span class="st">"C:/Data_Analysis/ComparingLCAvCFA"</span>,</span>
<span>  recursive <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"parameters"</span><span class="op">)</span></span></code></pre></div>
<p>The names of the returned list elements would be based on the
directory and file names of each file (note that spaces, slashes, and
the minus sign have been replaced by periods to be compatible with
<code>R</code> naming conventions):</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">allModelParameters</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## ComparingLCAvCFA.LCA.1.class.LCA.out</span></span>
<span><span class="co">## ComparingLCAvCFA.LCA.2.class.LCA.out</span></span>
<span><span class="co">## ComparingLCAvCFA.LCA.3.class.LCA.out</span></span>
<span><span class="co">## ComparingLCAvCFA.CFA.1.factor.CFA.out</span></span>
<span><span class="co">## ComparingLCAvCFA.CFA.2.factor.CFA.out</span></span>
<span><span class="co">## ComparingLCAvCFA.CFA.3.factor.CFA.out</span></span></code></pre></div>
<p>So, to extract the STDYX standardized results for the 2-factor CFA,
one would access that <code>data.frame</code> as follows:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">TwoFacCFA.STDYX</span> <span class="op">&lt;-</span> <span class="va">allModelParameters</span><span class="op">$</span><span class="va">ComparingLCAvCFA.CFA.2.factor.CFA.out</span><span class="op">$</span><span class="va">parameters</span><span class="op">$</span><span class="va">stdyx.standardized</span></span></code></pre></div>
<div class="section level4">
<h4 id="extracting-and-combining-model-results-across-files-and-sections">Extracting and combining model results across files and
sections<a class="anchor" aria-label="anchor" href="#extracting-and-combining-model-results-across-files-and-sections"></a>
</h4>
<p>Depending on the application, it may be useful to only retain certain
sections or to build a single large <code>data.frame</code> from the
multi-file list. What follows are a few standard <code>R</code>
practices for combining and subsetting data that may be unfamiliar to
inexperienced <code>R</code> users. These examples serve to demonstrate
how to work with the <code><a href="../reference/readModels.html">readModels()</a></code> list flexibly.</p>
<p><strong>Example: Only retaining unstandardized output</strong></p>
<p>By default, <code><a href="../reference/readModels.html">readModels()</a></code> returns unstandardized and
standardized output, where available. To retain only unstandardized
results, for example, one could do the following (building on the CFA v.
LCA example above):</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unstandardizedOnly</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">allModelParameters</span>, <span class="st">"["</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"parameters"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">unstandardizedOnly</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">unstandardizedOnly</span>, <span class="st">"["</span>, <span class="st">"unstandardized"</span><span class="op">)</span></span></code></pre></div>
<p>Note that the variable names of the <code>unstandardizedOnly</code>
list will represent a concatenation of the filename with the
unstandardized keyword. For example, the first element will now be
named: <code>ComparingLCAvCFA.LCA.1.class.LCA.out.unstandardized</code>.
Names can be manually tweaked using the <code>names</code> function. For
example, to retain the existing filenames without appending
.unstandardized, this would work:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oldNames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">allModelParameters</span><span class="op">)</span></span>
<span><span class="va">unstandardizedOnly</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">allModelParameters</span>, <span class="st">"["</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"parameters"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">unstandardizedOnly</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">unstandardizedOnly</span>, <span class="st">"["</span>, <span class="st">"unstandardized"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">unstandardizedOnly</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">oldNames</span></span></code></pre></div>
<p><strong>Example: Combining multi-file output into a single
<code>data.frame</code></strong></p>
<p>Rather than having a list of model results, where each element
represents the parameters from a single file, it may be useful to
combine these results into a single data.frame. The following code would
accomplish this (assumes the immediately prior code was run):</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#add the filename as a field in the data.frame (so it's uniquely identified when combined)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">unstandardizedOnly</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">element</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">unstandardizedOnly</span><span class="op">[[</span><span class="va">element</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">filename</span> <span class="op">&lt;&lt;-</span> <span class="va">element</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#this will only work if all data.frames have identical columns (i.e., same Mplus output fields)</span></span>
<span><span class="va">combinedParameters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="st">"rbind"</span>, <span class="va">unstandardizedOnly</span><span class="op">)</span></span></code></pre></div>
<p>Now, <code>combinedParameters</code> is a single
<code>data.frame</code> where each output file is identified by a
<code>filename</code> field.</p>
</div>
</div>
<div class="section level3">
<h3 id="basic-structure-of-each-model-results-section">Basic structure of each model results section<a class="anchor" aria-label="anchor" href="#basic-structure-of-each-model-results-section"></a>
</h3>
<p>At the most basic level, model parameters for a given section (and
perhaps a given file) are stored as a <code>data.frame</code>. Variables
included in such <code>data.frame</code> objects include:</p>
<ol style="list-style-type: decimal">
<li>paramHeader: The header that begins a given parameter set. Example:
“FACTOR1 BY”</li>
<li>param: The particular parameter being measured (within
<code>paramHeader</code>). Example: “ITEM1”</li>
<li>paramest: Parameter estimate value</li>
<li>se: Standard error of the estimate</li>
<li>est_se: Quotient of <code>paramest/se</code>, representing
z-test/t-test in large samples</li>
<li>pval: Two-tailed p-value for the <code>est_se</code> quotient</li>
</ol>
<p>Some models may provide different parameters, such as posterior
standard deviation for Bayesian models, and these are extracted
appropriately by the function. See the <code>R</code> documentation for
<code>readModels</code> for details about variable names for different
model types.</p>
</div>
<div class="section level3">
<h3 id="capitalizing-on-the-graphics-strength-of-r-to-visualize-results">Capitalizing on the graphics strength of <code>R</code> to visualize
results<a class="anchor" aria-label="anchor" href="#capitalizing-on-the-graphics-strength-of-r-to-visualize-results"></a>
</h3>
<p>One of the major strengths of <code>R</code> is its graphics
functionality. Numerous functions are provided by base <code>R</code>,
such as <code><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist()</a></code>, <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>, and
<code><a href="https://rdrr.io/r/graphics/curve.html" class="external-link">curve()</a></code>. Furthermore, impressively flexible and powerful
graphics functionality is now provided in <code>R</code> by the
<code>grid</code> graphics framework. An useful introduction to graphics
in <code>R</code> is provided by Paul Murrell’s book, <em>R Graphics,
Second Edition</em> published by CRC Press. In particular, the
<code>ggplot2</code> and <code>lattice</code> graphics package for
<code>R</code> provide powerful functions for <code>R</code>
graphics.</p>
<p>By contrast, Mplus has very basic graphics functionality that lacks
the flexibility and robustness of <code>R</code>.</p>
<p>Now that we have illustrated how to import Mplus model parameter
estimates into <code>R</code>, here are just a couple of examples of how
useful graphs in can be developed from <code><a href="../reference/readModels.html">readModels()</a></code>
data.</p>
<p><strong>Example: Plotting means and standard errors from a finite
mixture model</strong></p>
<p>The example model to be plotted comes from a finite mixture model
with seven continuous indicators of a latent construct, each scaled to
zero mean and unit variance. The intention of this plot is to visualize
the means and standard error of each indicator across the latent
classes.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://michaelhallquist.github.io/MplusAutomation/">MplusAutomation</a></span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span>  <span class="va">modelParams</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readModels.html">readModels</a></span><span class="op">(</span><span class="st">"output_to_plot.out"</span><span class="op">)</span><span class="op">$</span><span class="va">parameters</span><span class="op">$</span><span class="va">unstandardized</span></span>
<span>  <span class="va">modelParams</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">modelParams</span>,</span>
<span>    <span class="va">paramHeader</span><span class="op">==</span><span class="st">"Means"</span> <span class="op">&amp;</span></span>
<span>      <span class="va">LatentClass</span> <span class="op">!=</span> <span class="st">"Categorical.Latent.Variables"</span>,</span>
<span>    select<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LatentClass"</span>, <span class="st">"param"</span>, <span class="st">"est"</span>, <span class="st">"se"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">limits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymax <span class="op">=</span> <span class="va">est</span> <span class="op">+</span> <span class="va">se</span>, ymin<span class="op">=</span><span class="va">est</span> <span class="op">-</span> <span class="va">se</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="va">fmmMeanPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">modelParams</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">param</span>, y<span class="op">=</span><span class="va">est</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_pointrange</a></span><span class="op">(</span><span class="va">limits</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_x_discrete</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept<span class="op">=</span><span class="fl">0</span>, color<span class="op">=</span><span class="st">"grey50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">LatentClass</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Mean Value"</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fmmMeanPlot</span><span class="op">)</span></span></code></pre></div>
<p>This relatively brief code snippet provides a relatively useful plot
of this sort:</p>
<div class="figure">
<img src="mplusAutomationFMMPlot.png" class="r-plt" alt="Figure. Example of graphing finite mixutre model results from Mplus using ggplot2." width="80%"><p class="caption">
Figure. Example of graphing finite mixutre model results from Mplus
using ggplot2.
</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="comparing-summaries-and-parameters-across-models">Comparing summaries and parameters across models<a class="anchor" aria-label="anchor" href="#comparing-summaries-and-parameters-across-models"></a>
</h2>
<p>An important part of interpreting results from latent variable models
is the comparison of model fit indices and parameter estimates across
related sets of models. For example, when an additional covariate is
included in the model, how do the other parameter estimates change? The
<code><a href="../reference/compareModels.html">compareModels()</a></code> function is designed to compare model fit
indices and/or parameter estimates across two models.</p>
<p>This function also computes chi-square difference tests for nested
models estimated with the ML, MLM, MLR, WLS, or WLSM estimators using
the <code>diffTest</code> parameter.</p>
<p>To use <code><a href="../reference/compareModels.html">compareModels()</a></code>, I recommend using
<code><a href="../reference/readModels.html">readModels()</a></code> to extract various fit statistics and
parameters from two or more models. You can pass in either the
<code>summaries</code> or <code>parameters</code> components of the
objects returned by <code><a href="../reference/readModels.html">readModels()</a></code> to
<code><a href="../reference/compareModels.html">compareModels()</a></code>, or provide the full model objects.</p>
<p>Here is a brief example of how one might use
<code><a href="../reference/compareModels.html">compareModels()</a></code>.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">parallelModels</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readModels.html">readModels</a></span><span class="op">(</span><span class="st">"10_14_Harsh_SelfCon_Impul"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/compareModels.html">compareModels</a></span><span class="op">(</span><span class="va">parallelModels</span><span class="op">[[</span><span class="st">"backport.from.grand.model.out"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  <span class="va">parallelModels</span><span class="op">[[</span><span class="st">"backport.from.grand.model.slopesonw1.out"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  show <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"diff"</span>, <span class="st">"pdiff"</span>, <span class="st">"summaries"</span>, <span class="st">"unique"</span><span class="op">)</span>,</span>
<span>  equalityMargin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>param <span class="op">=</span> <span class="fl">.05</span>, pvalue <span class="op">=</span> <span class="fl">.02</span><span class="op">)</span>,</span>
<span>  sort <span class="op">=</span> <span class="st">"type"</span>, diffTest <span class="op">=</span> <span class="cn">TRUE</span>, showNS <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>Mplus model comparison
----------------------

------
Model 1:  10_14_Harsh_SelfCon_Impul/backport from grand model.out
Model 2:  10_14_Harsh_SelfCon_Impul/backport from grand model slopesonw1.out
------

Model Summary Comparison
------------------------

             m1                                    m2
Title        Harsh Impul Self-Control Trivariate   Harsh Impul Self-Control Trivariate
               LGCM with W1 Covariates - No Direct   LGCM with W1 Covariates - Direct
               Influence of W1 on Slopes and         Influence of W1 on Slopes and
               Intercepts                            Intercepts
Observations 2187                                  2187
Estimator    MLR                                   MLR
Parameters   87                                    103
LL           -69851.911                            -69820.77
AIC          139877.821                            139847.539
BIC          140372.876                            140433.639
ChiSqM_Value 280.781                               222.538
ChiSqM_DF    129                                   113
CFI          0.984                                 0.988
TLI          0.977                                 0.981
SRMR         0.025                                 0.022

  MLR Chi-Square Difference test for nested models based on loglikelihood
  -----------------------------------------------------------------------

  Difference Test Scaling Correction:  1.033437
  Chi-square difference:  60.2668
  Diff degrees of freedom:  16
  P-value:  0

  Note: The chi-square difference test assumes that these models are nested.
  It is up to you to verify this assumption.

  MLR Chi-Square Difference test for nested models
  --------------------------------------------

  Difference Test Scaling Correction: 1.03125
  Chi-square difference: 60.44
  Diff degrees of freedom: 16
  P-value: 0

Note: The chi-square difference test assumes that these models are nested.
  It is up to you to verify this assumption.

=========

Model parameter comparison
--------------------------


  Parameter estimates that differ between models (param. est. diff &gt; 0.05)
  ----------------------------------------------
        paramHeader      param m1_est m2_est . m1_se m2_se . m1_est_se m2_est_se . m1_pval m2_pval
          SCC_S1.ON      IMP_I  0.155  0.073 | 0.036 0.050 |     4.255     1.478 |   0.000   0.139
         HPC_I.WITH      IMP_I  0.128  0.182 | 0.066 0.069 |     1.927     2.634 |   0.054   0.008
         SCC_I.WITH      HPC_I  1.391  1.455 | 0.189 0.183 |     7.372     7.949 |   0.000   0.000
         SCC_I.WITH      IMP_I  0.213  0.352 | 0.127 0.134 |     1.682     2.624 |   0.093   0.009
        SCC_S1.WITH     SCC_S2 -0.584 -0.649 | 0.160 0.157 |    -3.638    -4.141 |   0.000   0.000
         Intercepts A11XEMOTSP  4.523  4.592 | 0.568 0.568 |     7.964     8.084 |   0.000   0.000
         Intercepts      HPC_I  5.272  5.528 | 0.225 0.243 |    23.446    22.723 |   0.000   0.000
         Intercepts      HPC_S  0.725  0.583 | 0.092 0.092 |     7.865     6.358 |   0.000   0.000
         Intercepts      IMP_I -0.661 -0.544 | 0.155 0.167 |    -4.263    -3.252 |   0.000   0.001
         Intercepts      SCC_I  4.113  4.299 | 0.390 0.409 |    10.547    10.515 |   0.000   0.000
         Intercepts     SCC_S2  4.811  5.008 | 0.382 0.418 |    12.604    11.987 |   0.000   0.000
 Residual.Variances   A10CHARP  2.376  2.299 | 0.158 0.156 |    15.016    14.719 |   0.000   0.000
 Residual.Variances   A10CSELF  6.871  6.544 | 0.554 0.534 |    12.405    12.245 |   0.000   0.000
 Residual.Variances   A12CSELF  6.298  6.206 | 0.406 0.401 |    15.531    15.493 |   0.000   0.000
 Residual.Variances   A14CHARP  2.019  1.959 | 0.154 0.150 |    13.149    13.075 |   0.000   0.000
 Residual.Variances   A14CSELF  2.547  2.654 | 0.903 0.896 |     2.821     2.961 |   0.005   0.003
 Residual.Variances      HPC_I  2.634  2.764 | 0.166 0.162 |    15.846    17.079 |   0.000   0.000
 Residual.Variances      SCC_I  7.086  7.433 | 0.574 0.552 |    12.351    13.463 |   0.000   0.000
 Residual.Variances     SCC_S1  0.606  0.680 | 0.140 0.131 |     4.312     5.203 |   0.000   0.000


  P-values that differ between models (p-value diff &gt; 0.02)
  -----------------------------------
 paramHeader param m1_est m2_est . m1_se m2_se . m1_est_se m2_est_se . m1_pval m2_pval
    HPC_S.ON IMP_I  0.049  0.028 | 0.011 0.015 |     4.243     1.894 |   0.000   0.058
   SCC_S1.ON IMP_I  0.155  0.073 | 0.036 0.050 |     4.255     1.478 |   0.000   0.139
  HPC_I.WITH IMP_I  0.128  0.182 | 0.066 0.069 |     1.927     2.634 |   0.054   0.008
  SCC_I.WITH IMP_I  0.213  0.352 | 0.127 0.134 |     1.682     2.624 |   0.093   0.009


  Parameters unique to model 1: 0
  -----------------------------

  None


  Parameters unique to model 2: 16
  -----------------------------

 paramHeader     param m2_est m2_se m2_est_se m2_pval
    HPC_S.ON W1PHARPUN  0.038 0.008     4.884   0.000
   SCC_S1.ON   W1PSELF  0.034 0.014     2.389   0.017


  14 filtered from output (fixed and/or n.s.)

    HPC_S.ON.IMPLW1, HPC_S.ON.W1PNEGEM, HPC_S.ON.W1PSELF, SCC_S1.ON.IMPLW1,
    SCC_S1.ON.W1PHARPUN, SCC_S1.ON.W1PNEGEM, SCC_S2.ON.IMPLW1,
    SCC_S2.ON.W1PHARPUN, SCC_S2.ON.W1PNEGEM, SCC_S2.ON.W1PSELF,
    IMP_S.ON.IMPLW1, IMP_S.ON.W1PHARPUN, IMP_S.ON.W1PNEGEM, IMP_S.ON.W1PSELF


==============</code></pre>
<p>As can be discerned above, the example <code><a href="../reference/compareModels.html">compareModels()</a></code>
call above compares two nested models from the list returned by
<code><a href="../reference/readModels.html">readModels()</a></code>. The <code>show</code> argument requests a
comparison of parameter value difference (<code>"diff"</code>), p-value
differences (<code>"pdiff"</code>), summary statistics
(<code>"summaries"</code>), and parameters unique to each model
(<code>"unique"</code>).</p>
<p>Parameter estimate differences must exceed .05 to be displayed, and
p-value differences must exceed .02 (this is specified by the
<code>equalityMargin</code> argument).</p>
<p>The parameter comparisons are sorted by type (factor loadings,
regressions, covariances, residual variances, etc.). A chi-square
difference test is requested using <code>diffTest=TRUE</code>. And
non-significant parameters are removed from the model comparison
(<code>showNS=FALSE</code>).</p>
</div>
<div class="section level2">
<h2 id="creating-a-group-of-models-from-an-mplus-template-file-createmodels">Creating a group of models from an Mplus template file
(<code>createModels()</code>)<a class="anchor" aria-label="anchor" href="#creating-a-group-of-models-from-an-mplus-template-file-createmodels"></a>
</h2>
<p>The third major focus of the <code>MplusAutomation</code> package is
to provide tools that automate the process of creating input files for a
related group of models. Perhaps the simplest example of a related group
of models is latent class analysis, where one runs a certain model with
different numbers of classes, but the input files are otherwise the
same.</p>
<p>The <code><a href="../reference/createModels.html">createModels()</a></code> function converts a single Mplus
template file into a set of related Mplus input files. The template
language is a simple extension of the Mplus language that allows dynamic
values to be inserted into Mplus syntax files while reusing most of the
code. The basic notion for template files is that multiple input files
are created by looping over one or more variables (called “iterators”)
and substituting specific values that change for each model, thereby
allowing for the creation of related input files that share much of the
code. As a basic example, one might iterate over a set of outcome
variables (e.g., positive emotions, negative emotions, and
conscientiousness) in a growth model where the dataset remains fixed,
but the outcome variables change.</p>
<p>Mplus template syntax files are divided into two sections: the init
section and the body section. The init section consists of definitions
for variables to be inserted in the Mplus syntax, instructions for
determining the filename and directory for created input files, and the
variables to loop over to create multiple Mplus input files. The body
section consists of Mplus syntax with template tags included where
certain variables will change (e.g., the number of classes, names of
outcome variables, etc.). Tags in Mplus syntax language are demarcated
by double brackets. For example, the tag <code>[[outcomeName]]</code>
requests that the value of provided in the init section be inserted into
the Mplus syntax file.</p>
<p>Before we get into details, a particularly simple example may make
the general concepts more tangible. This example is adapted from Mplus
User’s Guide Example 7.3: LCA with binary latent class indicators using
automatic starting values with random starts.</p>
<pre><code>[[init]]
iterators = classes;
classes = 1:7;
filename = "[[classes]]-class LCA 7.3.inp";
outputDirectory = "C:/MplusAutomation/LCA Outputs";
[[/init]]

TITLE: this is an example of a LCA with binary
latent class indicators using automatic
starting values with random starts
DATA: FILE IS ex7.3.dat;
VARIABLE: NAMES ARE u1-u4 x1-x10;
USEVARIABLES = u1-u4;
CLASSES = c ([[classes]]);
CATEGORICAL = u1-u4;
AUXILIARY = x1-x10 (e);
ANALYSIS: TYPE = MIXTURE;
OUTPUT: TECH1 TECH8 TECH10;</code></pre>
<p>The above template file instructs the <code><a href="../reference/createModels.html">createModels()</a></code>
function to loop over a variable called <code>classes</code>. The
<code>classes</code> variable is defined as the integers from 1-7 (the
colon in 1:7 indicates a sequence). Files should be named according to
the number of classes, so when <code>classes = 5</code>, then
<code>filename = "[[classes]]-class LCA 7.3.inp";</code> will evaluate
to <code>5-class LCA 7.3.inp</code>. All files will be saved in the
directory <code>C:/MplusAutomation/LCA Outputs</code>. Note that R``
uses forward slashes, not backslashes, to indicate directory paths.</p>
<p>In the body section of this simple example, the only thing that
changes is the definition <code>CLASSES = c([[classes]])</code>. And
because <code>classes</code> was defined as the integers from 1-7, 7
Mplus input files will be created by <code><a href="../reference/createModels.html">createModels()</a></code> with
the major difference being the number of classes. As
<code><a href="../reference/createModels.html">createModels()</a></code> loops over the classes variable, the current
value of classes is inserted in the body section.</p>
<div class="section level3">
<h3 id="init-section">Init section<a class="anchor" aria-label="anchor" href="#init-section"></a>
</h3>
<p>The init section consists of variable definitions that are used to
specify which variables are iterators, the number of iterations/models
to loop over, the filenames and directories for the input files created
by <code><a href="../reference/createModels.html">createModels()</a></code>, and the fields to be inserted in the
body section where template tags are specified. Variable definitions in
the iterator section use the syntax <code>variable = value;</code>.
Variable names are case-sensitive and value fields can span multiple
lines. All definitions must be terminated by a semicolon. In cases where
the variable’s value is a series of items (e.g., <code>outcome1</code>,
<code>outcome2</code>, <code>outcome3</code>, these should be specified
as a space-separated list (either using spaces or tabs). For example, if
one wants to link a particular variable to an iterator and for the value
of that list to be included in the body section, the definitions might
look something like:</p>
<pre><code>[[init]]
iterators = outcome;
outcome = 1:4;
outcomeNames#outcome = Conscien Extraver Agreeabl Openness;
filename = "CFA for [[outcomeNames#outcome]].inp";
outputDirectory = C:/;
[[/init]]</code></pre>
<p>Here, four input files will be created corresponding to four
different outcome variables: Conscien, Extraver, Agreeabl, and Openness
(which are all presumably defined in the body section of the template).
The main point here is that the outcomeNames variable is defined as a
four-item list, not as a single value. In cases where the values of a
variable need to contain spaces, be sure to include the values in double
quotes. For example, we might modify the outcomeNames field to be:</p>
<pre><code><span><span class="va">outcomeNames</span><span class="co">#outcome = "Conscientiousness Score" "Extraversion Score" "Agreeableness Score" "Openness Score";</span></span></code></pre>
<p>This point deserves emphasis: <strong>spaces are assumed to specify
distinct values unless they are enclosed in double quotes</strong>. This
behavior is similar to the Mplus language, where syntax such as
<code>VARIABLES = var1 var2 var3;</code> defines three distinct variable
names. Even where a given variable in the init section has only one
value (such as <code>filename</code> above), double quotes must be used
if the spaces are to be included in the created files, rather than being
interpreted as a list.</p>
<div class="section level4">
<h4 id="required-init-definitions">Required init definitions<a class="anchor" aria-label="anchor" href="#required-init-definitions"></a>
</h4>
<p>Three variables must be defined for all Mplus template files.</p>
<p><strong>First</strong>, the <code>iterators</code> variable defines
which variables in the init section are iterators (i.e., integer
variables to be looped over to create the input files). Iterators will
be looped over in the order specified by the definition of
<code>iterators</code>. Here is an example of three iterators that will
create a total of 60 files (4<em>5</em>3).</p>
<pre><code>[[init]]
iterators = outcome model classes;
outcome = 1:4;
model = 1:5;
classes = 2 3 4;
filename = "[[classes]]-class Model.inp";
outputDirectory = C:/Data/[[outcome]]/[[model]];
[[/init]]</code></pre>
<p>In the above example, the program will loop over
<code>outcome</code>, <code>model</code>, and <code>classes</code> in
that order. So the first file to be created would be outcome=1, model=1,
classes=1, the second model would be outcome=1, model=1, classes=2, etc.
For the more technical reader, iterators are processed recursively from
left to right (here, classes within model within outcome). The top-most
iterator is <code>outcome</code> and the bottom-most is
<code>classes</code>. Don’t worry too much about this, though. In most
cases, the ordering does not matter much and one generally will not hvae
to think about how the program handles the iterators.</p>
<p>The <strong>second</strong> required init variable is
<code>filename</code>. This variable defines the filenames for input
files created by the <code><a href="../reference/createModels.html">createModels()</a></code> function. In general,
these should end in “.inp” to be consistent with Mplus conventions.
Other tags can be (and probably should be) included in the filename
definition. The idea is that the combination of <code>filename</code>
and <code>outputDirectory</code> should define a unique file/path for
<em>each</em> input file created by the <code><a href="../reference/createModels.html">createModels()</a></code>
function. Remember that if your filename contains any spaces, please use
double quotes.</p>
<p>The <strong>third</strong> required init variable is
<strong>outputDirectory</strong>. This variable defines the directory
(or directories) where input files should be saved. <strong>Please
note:</strong> If directories specified by <code>outputDirectory</code>
do not exist, the <code><a href="../reference/createModels.html">createModels()</a></code> function will create them,
so be careful that the path is correct. If no output directory is
specified, <code><a href="../reference/createModels.html">createModels()</a></code> will place the input files in the
<code>R</code> working directory (viewable by <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd()</a></code> and
settable by <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd()</a></code>), but it is preferable always to
specify an output directory. If an output directory is not an absolute
path (i.e., one that begins with a drive letter, such as
<code>C:\</code>), then the top level of the output directory will be
placed within the working directory. Consider this value of
<code>outputDirectory</code>:</p>
<pre><code>[[init]]
iterators = outcome model;
outcome = 1:2;
model = 1:3;
outcomeName#outcome = Outcome1 Outcome2;
modelName#model = Model1 Model2 Model3;
outputDirectory = "C:/CFA/[[outcomeName#outcome]]/[[modelName#model]]";
filename="testfile.inp"
[[/init]]</code></pre>
<p>The above syntax will create the following directory structure:</p>
<pre><code><span><span class="va">CFA</span><span class="op">/</span></span>
<span><span class="va">CFA</span><span class="op">/</span><span class="va">Outcome1</span><span class="op">/</span><span class="va">Model1</span></span>
<span><span class="va">CFA</span><span class="op">/</span><span class="va">Outcome1</span><span class="op">/</span><span class="va">Model2</span></span>
<span><span class="va">CFA</span><span class="op">/</span><span class="va">Outcome1</span><span class="op">/</span><span class="va">Model3</span></span>
<span><span class="va">CFA</span><span class="op">/</span><span class="va">Outcome2</span><span class="op">/</span><span class="va">Model1</span></span>
<span><span class="va">CFA</span><span class="op">/</span><span class="va">Outcome2</span><span class="op">/</span><span class="va">Model2</span></span>
<span><span class="va">CFA</span><span class="op">/</span><span class="va">Outcome2</span><span class="op">/</span><span class="va">Model3</span></span></code></pre>
<p>It is generally recommended that users specify an absolute path
(i.e., one that begins with a drive letter such as C:/) for
<code>outputDirectory</code> to avoid any confusion about where the
files will be saved. Note that it is typical to include tags in the
definition of <code>outputDirectory</code> to allow for dynamic naming
of the directories according to the model file being created. Consider
this example, which defines both <code>filename</code> and
<code>outputDirectory</code> to create a set of unique files:</p>
<pre><code>[[init]]
iterators = outcome model;
outcome = 1:5;
model = 1:3;
outcomeDirNames#outcome = Conscientiousness Extraversion Agreeableness Openness Neuroticism;
modelNames#model = Poisson "Negative Binomial" "Negative Binomial Hurdle";
filename = "[[modelNames#model]] Growth Model.inp";
outputDirectory = "Template Output/[[outcomeDirNames#outcome]];"
[[/init]]</code></pre>
<p>In this case, because the <code>outputDirectory</code> is not an
absolute path (i.e., does not begin with a drive letter), a directory
called “Template Output” will be created within the <code>R</code>
working directory (<code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd()</a></code>). Five subdirectories within
“Template Output” will be created: “Conscientiousness”, “Extraversion”,
“Agreeableness”, “Openness”, and “Neuroticism”. Within each of those
directories, three files will be created: “Poisson Growth Model.inp”,
“Negative Binomial Growth Model.inp”, and “Negative Binomial Hurdle
Growth Model.inp”. The idea is that as <code><a href="../reference/createModels.html">createModels()</a></code>
iterates over <code>outcome</code> and <code>model</code>, the
appropriate values of <code>outcomeDirNames</code> and
<code>modelNames</code> will be inserted. As described in the <em>list
tag</em> section below, the # separating the <code>modelNames</code> and
<code>model</code> terms indicates that with each iteration of
<code>model</code>, the matching element of the <code>modelNames</code>
variable will be inserted.</p>
</div>
</div>
<div class="section level3">
<h3 id="tag-types">Tag types<a class="anchor" aria-label="anchor" href="#tag-types"></a>
</h3>
<p>There are four types of tags supported by the Mplus template
language.</p>
<ol style="list-style-type: decimal">
<li>
<em>simple</em>: A value defined in the init section is substituted
wherever the simple tag occurs in the body section, unrelated to the
status of an iterator.</li>
<li>
<em>list</em>: A certain element from a list of values is
substituted depending on the value of the specified iterator.</li>
<li>
<em>iterator</em>: The numeric value of the iterator is
substituted.</li>
<li>
<em>conditional</em>: A certain block of code is included only if a
condition is met (e.g., classes &gt; 1).</li>
</ol>
<div class="section level4">
<h4 id="simple-tags">Simple tags<a class="anchor" aria-label="anchor" href="#simple-tags"></a>
</h4>
<p>Simple tags refer to variables that are defined in the init section,
but that do not change with respect to an iterator. In practice, these
are often less useful than list tags. But simple tags are useful when a
certain variable/word occurs in several places in the input file and
might need to be changed throughout the model. In essence, a simple tag
can act as a find/replace function: the value is defined once in the
init section and is inserted in the body section wherever the tag
occurs.</p>
<p>Here is a simple tag example that uses simple tags to specify the
time scores in a latent growth curve model:</p>
<pre><code>[[init]]
iterators = model;
model = 1:3;
t1ModelNames#model = Outcome1_t1 Outcome2_t1 Outcome3_t1;
t2ModelNames#model = Outcome1_t2 Outcome2_t2 Outcome3_t2;
t3ModelNames#model = Outcome1_t3 Outcome2_t3 Outcome3_t3;
time1 = 0;
time2 = 1;
time3 = 3;
outputDirectory=output;
filename=[[modelOutcome#model]].inp;
[[/init]]
TITLE: [[modelOutcomes#model]] Latent Growth Curve Model
DATA:   FILE = "testData.dat";
VARIABLE:   NAMES ARE   id outcome1 outcome2 outcome3 covariate1;
MODEL: i s | [[t1ModelNames#model]]@[[time1]] [[t2ModelNames#model]]@[[time2]] [[t3ModelNames#model]]@[[time3]];
PLOT: TYPE=PLOT3;
    SERIES=[[t1ModelNames#model]] ([[time1]]) [[t2ModelNames#model]] ([[time2]]) [[t3ModelNames#model]] ([[time3]]);
    i s ON covariate1;</code></pre>
<p>The key idea with respect to simple tags is that the time scores are
inserted both for the model and plot sections. Then if one wanted to
change the time scores, these would be included in both sections. This
is a bit contrived since one could easily use the command
<code>SERIES=[[t1ModelNames#model]]-[[t3ModelNames#model]] (s);</code>.</p>
</div>
<div class="section level4">
<h4 id="list-tags">List tags<a class="anchor" aria-label="anchor" href="#list-tags"></a>
</h4>
<p>List tags are used to insert a given value from a list init variable
(i.e., one that has more than one element) depending on the value of the
related iterator. List init variables are always linked to a particular
iterator and should have the same number of elements as that iterator.
To indicate that a list tag is tied to a certain iterator, include the
suffix #<iterator> after the variable name, where <iterator> is the
iterator of interest. For example, if one is creating a template file to
iterate over 3 variables in a growth model, this can be accomplished
with a single iterator variable (e.g., <code>outcome</code>). When
defining the variable names to be used in the Mplus syntax, list tags
could be used as follows:</iterator></iterator></p>
<pre><code>[[init]]
iterators = outcome;
outcome = 1:3;
modelName#outcome = "Outcome 1" "Outcome 2" "Outcome 3";
wave1Name#outcome = outcome1_w1 outcome2_w1 outcome3_w1;
wave2Name#outcome = outcome1_w2 outcome2_w2 outcome3_w2;
wave3Name#outcome = outcome1_w3 outcome2_w3 outcome3_w3;
outputDirectory=test;
filename="[[modelName#outcome]] Growth Model.inp";
[[/init]]
TITLE: [[modelName#outcome]] Growth Model
DATA:   FILE = "testData.dat";
VARIABLE:   NAMES ARE   id outcome1_w1 outcome1_w2 outcome1_w3
    outcome2_w1 outcome2_w2 outcome2_w3
    outcome3_w1 outcome3_w2 outcome3_w3;
    
    USEVARIABLES ARE [[wave1Name#outcome]] [[wave2Name#outcome]] [[wave3Name#outcome]];
MODEL:
    i s | [[wave1Name#outcome]]@0 [[wave2Name#outcome]]@1 [[wave3Name#outcome]]@2;</code></pre>
<p>In this simple example, there are four list tags tied to the outcome
iterator. One list tag, <code>modelName#outcome</code> defines the
descriptive names for each model used in the title and filename. The
other list tags
(<code>wave1Name#outcome, wave2Name#outcome, wave3Name#outcome</code>)
are used to specify the variable names at each wave for the current
value of the <code>outcome</code> iterator.</p>
</div>
<div class="section level4">
<h4 id="iterator-tags">Iterator tags<a class="anchor" aria-label="anchor" href="#iterator-tags"></a>
</h4>
<p>Iterator tags are used to insert the numeric value of a given
iterator into the body section (or another init variable). These are
most useful when the numeric value of the iterator conveys some useful
meaning, as in the case of multiple latent classes in mixture modeling
or measurement occasions in growth modeling.</p>
<p>An iterator tag example was given above, where Mplus User’s Guide
Example 7.3 was adapted to create a set of related models spanning 1-7
classes. The relevant line for an iterator tag was:</p>
<pre><code>CLASSES = c ([[classes]]);</code></pre>
<p>Here, the numeric value of the classes iterator (which ranged from 1
to 7) is inserted in the Mplus syntax in place of the
<code>[[classes]]</code> tag..</p>
</div>
<div class="section level4">
<h4 id="conditional-tags">Conditional tags<a class="anchor" aria-label="anchor" href="#conditional-tags"></a>
</h4>
<p>Conditional tags are used to specify the conditions under which a
certain block of Mplus syntax should be included or excluded from
generated input files. Unlike the other types of tags, conditional tags
themselves do not substitute particular values into the input file.
Rather, there is always an opening tag and a closing conditional tag
that define a pair, and the syntax between these tags is included
provided the condition is met.</p>
<p>The basic syntax for a conditional tag is:
<code>[[&lt;varname&gt; &lt;operator&gt; &lt;value&gt;]]</code> where
varname is the variable whose condition is to be checked, operator is a
logical operator (currently supported are <code>==</code>,
<code>!=</code>, <code>&lt;</code>, <code>&gt;</code>,
<code>&lt;=</code>, and <code>&gt;=</code>, for “equal to”, “not equal
to”, “less than”, “greater than”, “less than or equal to”, and “greater
than or equal to”, respectively), and value is a numeric value or
character string to be compared against. The closing tag is always
identical to the opening tag, except that it is prefixed by a single
forward slash (drawing from basic HTML/XML syntax). Here is a simple
excerpt demonstrating a conditional tag:</p>
<pre><code>[[init]]
iterators=model;
model=1:5;
var1=test1;
var2=test2;
var3=test3;
[[/init]]
[[model &gt; 2]]
COUNT ARE [[var1]] [[var2]] [[var3]];
[[/model &gt; 2]]</code></pre>
<p>The closing tag must match the opening tag exactly (at this point,
even use of spaces). Conditional tags may be placed on separate rows or
may be placed on the same row as the syntax to be included/excluded.
Multiple conditional tags may be placed on the same row. As further
described in the caveats/limitations section below, only one condition
may be checked using a conditional tag, but multiple conditions may be
checked by nesting two tags. If the value to be checked (i.e., on the
right side of the comparator) is a character string, enclose it in
double quotes, such as:</p>
<pre><code>[[modelNames#model != "Poisson GMM"]]
!Mplus code specific to non-Poisson GMM models here
[[/modelNames#model != "Poisson GMM"]]</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="a-complete-example">A Complete Example<a class="anchor" aria-label="anchor" href="#a-complete-example"></a>
</h3>
<p>Here, we provide a complex complete example of a template file that
generates 480 input files in numerous subfolders. This is probably
overkill for most applications, but it gives a sense of what the
language is capable of. The application here is growth mixture modeling
for symptoms of DSM-IV personality disorders over time. There are 10
personality disorders and two groups of participants: high risk and low
risk. In addition, one question of interest is whether a class
constrained to 0 at the first measurement occasion with 0 growth
captures a subgroup of participants. In addition, one might be
interested in comparing whether these count data are better modeled by a
continuous normal model versus a Poisson model, and whether Poisson GMM
provides a better fit than Poission latent class growth analysis (LCGA).
All of these considerations are reflected in this single template file.
As a sane default, we chose to generate models that vary between 1 and 4
latent trajectory classes.</p>
<pre><code>[[init]]
iterators = outcome group model classes zeroclass;
outcome = 1:10;
group = 2 5;
model = 1:3;
classes = 1:4;
zeroclass = 1:2;

outcomenames#outcome = Paranoid Schizoid Schizotypal Antisocial
    Borderline Histrionic Narcissistic Avoidant Dependent OCPD;

groupnames#group = "Low Risk" "High Risk";

modelnames#model = "Normal LGCM" "Poisson GMM" "Poisson LCGA";

zeroclassnames#zeroclass = "" " with zero class";

#wave names are with respect to the outcome iterator
w1name#outcome = Paran1 Szoid1 Sztyp1 Anti1 Border1 Hist1
    Narc1 Avoid1 Depend1 OCPD1;
w2name#outcome = Paran2 Szoid2 Sztyp2 Anti2 Border2 Hist2
    Narc2 Avoid2 Depend2 OCPD2;
w3name#outcome = Paran3 Szoid3 Sztyp3 Anti3 Border3 Hist3
    Narc3 Avoid3 Depend3 OCPD3;

filename = "[[classes]]-class [[groupnames#group]] [[outcomenames#outcome]] [[modelnames#model]][[zeroclassnames#zeroclass]].inp";
outputDirectory = "PD GMM/[[outcomenames#outcome]]/[[groupnames#group]]/Unconditional_Models/[[modelnames#model]]";
[[/init]]

TITLE: [[classes]]-class [[outcomenames#outcome]] [[groupnames#group]] [[modelnames#model]] Unconditional Model[[zeroclassnames#zeroclass]]
DATA:   FILE = "personality_mplus.dat";
VARIABLE:   NAMES ARE
    id group sex age Paran1 Szoid1 Sztyp1 Anti1 Border1 Hist1 Narc1 Avoid1 Depend1
        OCPD1 PaAg1 Sadist1 SelfDef1 Paran2 Szoid2 Sztyp2 Anti2 Border2 Hist2 Narc2
        Avoid2 Depend2 OCPD2 Paran3 Szoid3 Sztyp3 Anti3 Border3 Hist3 Narc3 Avoid3
        Depend3 OCPD3;

    MISSING ARE .;
    USEVARIABLES ARE  [[w1name#outcome]] [[w2name#outcome]] [[w3name#outcome]];
    USEOBSERVATIONS ARE group EQ [[group]]; ![[groupnames#group]] Only
    
    [[model &gt; 1]]
    COUNT ARE [[w1name#outcome]] [[w2name#outcome]] [[w3name#outcome]];
    [[/model &gt; 1]]
    CLASSES = c ([[classes]]);

ANALYSIS:
    TYPE = MIXTURE;
    STARTS = 1000 10;
    K-1STARTS = 750 6;
    PROCESSORS = 4;
    [[model = 2]]
    ALGORITHM = INTEGRATION;
    [[/model = 2]]
MODEL:

%OVERALL%
Int Slope | [[w1name#outcome]]@0 [[w2name#outcome]]@0.97 [[w3name#outcome]]@2.77;

[[classes &gt; 1]]
[[zeroclass = 2]]
!creates a class with all zeros at all time points
[[model=1]]
%c#2%
[Int@0 Slope@0];
Int@0 Slope@0;
[[/model=1]]
[[model&gt;1]]
%c#2%
[Int@-15 Slope@-15];
Int@0 Slope@0;
[[/model&gt;1]]
[[/zeroclass = 2]]
[[/classes &gt; 1]]

PLOT:
    Type = PLOT3;
    Series =  [[w1name#outcome]] (0) [[w2name#outcome]] (0.97) [[w3name#outcome]] (2.77);
OUTPUT: TECH1 TECH4 [[model != 1]]TECH10 [[/model != 1]][[classes &gt; 1]]TECH11 TECH14 [[/classes &gt; 1]]STANDARDIZED RESIDUAL;</code></pre>
<p>Rather than detailing this file line-by-line, a few points will be
highlighted. First note that the <code>group</code> iterator has values
of 2 and 5, which are non-contiguous and do not start at zero. This is
fine for iterators, but note that the <code>groupnames#group</code> list
variable has two elements (not 5). The essential idea is that iterators
can take on any values (assuming they are unique) and the elements of
the corresponding list tag should match one-to-one with the order of
values (left to right) of the iterator.</p>
<p>Second, notice that conditional tags are used to specify that the
numerical integration algorithm should only be used for model 2, which
refers to Poisson GMM, whereas Poisson LCGA and Normal GMM do not
require these features. Third, notice how two conditional tags are used
on the last line to indicate when TECH10, TECH11, TECH14 should be
included in the model estimation (TECH10 is only relevant for count
outcomes and TECH11 and TECH14 are only relevant for multi-class
models). Lastly, notice how nested conditional tags are used to specify
a large block of code that is included only when creating a model with
classes &gt; 1 and zeroclass = 2. Here, zeroclass = 2 refers to models
where an all-zero class is desired, whereas zeroclass = 1 indicates no
zero class.</p>
</div>
<div class="section level3">
<h3 id="caveats-and-limitations">Caveats and limitations<a class="anchor" aria-label="anchor" href="#caveats-and-limitations"></a>
</h3>
<div class="section level4">
<h4 id="circular-tag-definition">Circular tag definition<a class="anchor" aria-label="anchor" href="#circular-tag-definition"></a>
</h4>
<p>Although it is frequently useful to define init variables that
include tags, be careful not to define two variables whose definitions
depend on each other. This situation will result in a repetitive loop
that cannot adequately resolve the tags (the program will inform you of
this error). Here is an example of circular init variable
definition:</p>
<pre><code>iterators = model;
model = 1:3;
A = a_test1 a_test2 "a_test3[[B#model]]";
B = "b_test1 [[A#model]]" "b_test2 [[A#model]]" "b_test3 [[A#model]]";</code></pre>
<p>In this case, both list variables are defined with respect to the
<code>model</code> iterator. When <code>model</code> is 3, the tag
cannot be resolved because the tags are circularly defined.</p>
</div>
<div class="section level4">
<h4 id="conditional-logic-for-multiple-conditions">Conditional logic for multiple conditions<a class="anchor" aria-label="anchor" href="#conditional-logic-for-multiple-conditions"></a>
</h4>
<p>At this point, conditional tags only support checking the status of a
single proposition (e.g., model != 1). In some cases, it is useful to
only include a certain piece of Mplus syntax when two or more conditions
are met. The workaround in the current version of
<code>MplusAutomation</code> is to define two conditional tags, such as
this example:</p>
<pre><code>[[model &gt; 1]]
[[classes != 1]]
var3@0; !Mplus code here
[[/classes]]
[[/model &gt; 1]]</code></pre>
<p>Checking for multiple conditions is on the short list of “to do”
items and statements such as
<code>[[model &gt; 1 &amp;&amp; classes != 1]]</code> should be
available in a future version of the package.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Hallquist, Joshua Wiley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
