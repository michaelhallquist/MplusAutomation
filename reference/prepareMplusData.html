<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create tab-delimited file and Mplus input syntax from R data.frame — prepareMplusData • MplusAutomation</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create tab-delimited file and Mplus input syntax from R data.frame — prepareMplusData"><meta name="description" content="The prepareMplusData function converts an R data.frame
(or a list of data frames), into a tab-delimited
file (without header) to be used in an Mplus
input file. The corresponding Mplus syntax, including the
data file definition and variable names,
is printed to the console or optionally to an input file."><meta property="og:description" content="The prepareMplusData function converts an R data.frame
(or a list of data frames), into a tab-delimited
file (without header) to be used in an Mplus
input file. The corresponding Mplus syntax, including the
data file definition and variable names,
is printed to the console or optionally to an input file."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MplusAutomation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/submitModels.html">Submitting Many Mplus Models to an HPC with submitModels()</a></li>
    <li><a class="dropdown-item" href="../articles/vignette.html">MplusAutomation Examples</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/michaelhallquist/MplusAutomation/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create tab-delimited file and Mplus input syntax from R data.frame</h1>
      <small class="dont-index">Source: <a href="https://github.com/michaelhallquist/MplusAutomation/blob/master/R/prepareMplusData.R" class="external-link"><code>R/prepareMplusData.R</code></a></small>
      <div class="d-none name"><code>prepareMplusData.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>prepareMplusData</code> function converts an R data.frame
(or a list of data frames), into a tab-delimited
file (without header) to be used in an Mplus
input file. The corresponding Mplus syntax, including the
data file definition and variable names,
is printed to the console or optionally to an input file.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepareMplusData</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  filename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  inpfile <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  keepCols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dropCols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dummyCode <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  interactive <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  imputed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  writeData <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"always"</span>, <span class="st">"ifmissing"</span>, <span class="st">"never"</span><span class="op">)</span>,</span>
<span>  hashfilename <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  use_relative_path <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>The R data.frame to be prepared for Mplus</p></dd>


<dt id="arg-filename">filename<a class="anchor" aria-label="anchor" href="#arg-filename"></a></dt>
<dd><p>The path and filename for the tab-delimited data file
for use with Mplus. Example: "C:/Mplusdata/data1.dat"</p></dd>


<dt id="arg-inpfile">inpfile<a class="anchor" aria-label="anchor" href="#arg-inpfile"></a></dt>
<dd><p>Logical value whether the Mplus syntax should be written
to the console or to an input file. Defaults to <code>FALSE</code>. If
<code>TRUE</code>, the file name will be the same as <code>filename</code> with
the extension changed to .inp.  Alternately, this can be a character
string giving the file name to write the Mplus syntax to.</p></dd>


<dt id="arg-keepcols">keepCols<a class="anchor" aria-label="anchor" href="#arg-keepcols"></a></dt>
<dd><p>A character vector specifying the variable names
within <code>df</code> to be output to <code>filename</code> or a numeric
vector of the column indices to be output or a logical vector
corresponding to the same.</p></dd>


<dt id="arg-dropcols">dropCols<a class="anchor" aria-label="anchor" href="#arg-dropcols"></a></dt>
<dd><p>A character vector specifying the variable names
within <code>df</code> to be omitted from the data output to <code>filename</code>
or a numeric vector of the column indices not to be output
or a logical vector corresponding to the same.</p></dd>


<dt id="arg-dummycode">dummyCode<a class="anchor" aria-label="anchor" href="#arg-dummycode"></a></dt>
<dd><p>An optional character vector of column names indicating
categorical variables in the dataset that should be converted into
dummy codes (using the <code>fastDummies</code> package). Note that one dummy
code is returned for *each level*, so no reference category is implied.
Thus, it is up to you to drop one of the dummy codes in the Mplus syntax
to denote the reference category and avoid multicollinearity.</p></dd>


<dt id="arg-interactive">interactive<a class="anchor" aria-label="anchor" href="#arg-interactive"></a></dt>
<dd><p>Logical value indicating whether file names
should be selected interactively. If <code>filename</code> is
missing and <code>interative=TRUE</code>, then a dialogue box
will pop up to select a file or a console prompt if in a
non interactive context. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>Logical value indicating whether
data and input (if present) files should be overwritten.
Defaults to <code>TRUE</code> to be consistent with prior behavior.
If <code>FALSE</code> and the file to write the data to already exists,
it will throw an error.</p></dd>


<dt id="arg-imputed">imputed<a class="anchor" aria-label="anchor" href="#arg-imputed"></a></dt>
<dd><p>A logical whether data are multiply imputed.  Defaults
to <code>FALSE</code>.  If <code>TRUE</code>, the data should be a list,
where each element of the list is a multiply imputed dataset.</p></dd>


<dt id="arg-writedata">writeData<a class="anchor" aria-label="anchor" href="#arg-writedata"></a></dt>
<dd><p>A character vector, one of ‘always’,
‘ifmissing’, ‘never’ indicating whether the data files
(*.dat) should be written to disk.  Defaults to
‘always’ for consistency with previous behavior.
See details for further information.</p></dd>


<dt id="arg-hashfilename">hashfilename<a class="anchor" aria-label="anchor" href="#arg-hashfilename"></a></dt>
<dd><p>A logical whether or not to add a hash of the raw data to the
data file name.  Defaults to <code>FALSE</code> for consistency with previous
behavior where this feature was not available.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>optional. If <code>TRUE</code>, show status messages in the console.</p></dd>


<dt id="arg-use-relative-path">use_relative_path<a class="anchor" aria-label="anchor" href="#arg-use-relative-path"></a></dt>
<dd><p>If <code>TRUE</code>, only include the relative path in the <code>DATA: FILE =</code>
syntax returned by the function. This works well if the <code>.dat</code> file and the <code>.inp</code> file
are located in the same folder, as is common for <code>Mplus</code>. Default: <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisibly returns a character vector of the Mplus input
  syntax. Primarily called for its side effect of creating Mplus
  data files and optionally input files.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>writeData</code> argument is new and can be used to reduce overhead
from repeatedly writing the same data from R to the disk.  When using the
‘always’ option, <code>prepareMplusData</code> behaves as before, always writing
data from R to the disk.  When ‘ifmissing’, R generates an
md5 hash of the data prior to writing it out to the disk.  The md5 hash is based on:
(1) the dimensions of the dataset, (2) the variable names,
(3) the class of every variable, and (4) the raw data from the first and last rows.
This combination ensures that under most all circumstances, if the data changes,
the hash will change.  The hash is appended to the specified data file name
(which is controlled by the logical <code>hashfilename</code> argument).  Next R
checks in the directory where the data would normally be written.  If a data file
exists in that directory that matches the hash generated from the data, R will
use that existing data file instead of writing out the data again.
A final option is ‘never’.  If this option is used, R will not write
the data out even if no file matching the hash is found.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Michael Hallquist</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://svn.r-project.org/R-packages/trunk/foreign/" class="external-link">foreign</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">study5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/foreign/man/read.spss.html" class="external-link">read.spss</a></span><span class="op">(</span><span class="st">"reanalysis-study-5-mt-fall-08.sav"</span>, to.data.frame<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ASData5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">study5</span>, select<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ppnum"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"as"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">33</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">ASData5</span>, <span class="st">"study5.dat"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># basic example</span></span></span>
<span class="r-in"><span><span class="va">test01</span> <span class="op">&lt;-</span> <span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test01.dat"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># see that syntax was stored</span></span></span>
<span class="r-in"><span><span class="va">test01</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># example when there is a factor and logical</span></span></span>
<span class="r-in"><span><span class="va">tmpd</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span></span>
<span class="r-in"><span><span class="va">tmpd</span><span class="op">$</span><span class="va">cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">tmpd</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tmpd</span><span class="op">$</span><span class="va">am</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">as.logical</a></span><span class="op">(</span><span class="va">tmpd</span><span class="op">$</span><span class="va">am</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">tmpd</span>, <span class="st">"test_type.dat"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">tmpd</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># by default, if re-run, data is re-written, with a note</span></span></span>
<span class="r-in"><span><span class="va">test01b</span> <span class="op">&lt;-</span> <span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test01.dat"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if we turn on hashing in the filename the first time,</span></span></span>
<span class="r-in"><span><span class="co"># we can avoid overwriting notes the second time</span></span></span>
<span class="r-in"><span><span class="va">test01c</span> <span class="op">&lt;-</span> <span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test01c.dat"</span>, hashfilename<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># now that the filename was hashed in test01c, future calls do not re-write data</span></span></span>
<span class="r-in"><span><span class="co"># as long as the hash matches</span></span></span>
<span class="r-in"><span><span class="va">test01d</span> <span class="op">&lt;-</span> <span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test01c.dat"</span>,</span></span>
<span class="r-in"><span>  writeData <span class="op">=</span> <span class="st">"ifmissing"</span>, hashfilename<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># now that the filename was hashed in test01c, future calls do not re-write data</span></span></span>
<span class="r-in"><span><span class="co"># as long as the hash matches</span></span></span>
<span class="r-in"><span><span class="va">test01db</span> <span class="op">&lt;-</span> <span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test01d.dat"</span>,</span></span>
<span class="r-in"><span>  writeData <span class="op">=</span> <span class="st">"ifmissing"</span>, hashfilename<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># however, if the data change, then the file is re-written</span></span></span>
<span class="r-in"><span><span class="va">test01e</span> <span class="op">&lt;-</span> <span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">iris</span>, <span class="st">"test01c.dat"</span>,</span></span>
<span class="r-in"><span>  writeData <span class="op">=</span> <span class="st">"ifmissing"</span>, hashfilename<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># tests for keeping and dropping variables</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test02.dat"</span>, keepCols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mpg"</span>, <span class="st">"hp"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test03.dat"</span>, keepCols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test04.dat"</span>,</span></span>
<span class="r-in"><span>  keepCols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test05.dat"</span>, dropCols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mpg"</span>, <span class="st">"hp"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test06.dat"</span>, dropCols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test07.dat"</span>,</span></span>
<span class="r-in"><span>  dropCols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># interactive (test08.dat)</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, interactive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># write syntax to input file, not stdout</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test09.dat"</span>, inpfile<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># write syntax to alternate input file, not stdout</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test10.dat"</span>, inpfile<span class="op">=</span><span class="st">"test10alt.inp"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># should be error, no file</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, interactive<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># new warnings if it is going to overwrite files</span></span></span>
<span class="r-in"><span><span class="co"># (the default to be consistent with prior behavior)</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test10.dat"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># new warnings if it is going to overwrite files</span></span></span>
<span class="r-in"><span><span class="co"># (the default to be consistent with prior behavior)</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test11.dat"</span>, inpfile<span class="op">=</span><span class="st">"test10alt.inp"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># new errors if files exist and overwrite=FALSE</span></span></span>
<span class="r-in"><span><span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"test10.dat"</span>,</span></span>
<span class="r-in"><span>  inpfile<span class="op">=</span><span class="st">"test10alt.inp"</span>, overwrite<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># can write multiply imputed data too</span></span></span>
<span class="r-in"><span><span class="co"># here are three "imputed" datasets</span></span></span>
<span class="r-in"><span><span class="va">idat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>, hp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">hp</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>, hp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">110</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">hp</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>, hp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">hp</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if we turn on hashing in the filename the first time,</span></span></span>
<span class="r-in"><span><span class="co"># we can avoid overwriting notes the second time</span></span></span>
<span class="r-in"><span><span class="va">testimp1</span> <span class="op">&lt;-</span> <span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">idat</span>, <span class="st">"testi1.dat"</span>,</span></span>
<span class="r-in"><span>  writeData <span class="op">=</span> <span class="st">"ifmissing"</span>, hashfilename<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  imputed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># now that the filename was hashed, future calls do not re-write data</span></span></span>
<span class="r-in"><span><span class="co"># as long as all the hashes match</span></span></span>
<span class="r-in"><span><span class="va">testimp2</span> <span class="op">&lt;-</span> <span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">idat</span>, <span class="st">"testi2.dat"</span>,</span></span>
<span class="r-in"><span>  writeData <span class="op">=</span> <span class="st">"ifmissing"</span>, hashfilename<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  imputed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># in fact, the number of imputations can decrease</span></span></span>
<span class="r-in"><span><span class="co"># and they still will not be re-written</span></span></span>
<span class="r-in"><span><span class="va">testimp3</span> <span class="op">&lt;-</span> <span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">idat</span><span class="op">[</span><span class="op">-</span><span class="fl">3</span><span class="op">]</span>, <span class="st">"testi3.dat"</span>,</span></span>
<span class="r-in"><span>  writeData <span class="op">=</span> <span class="st">"ifmissing"</span>, hashfilename<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  imputed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># however, if the data changes, then all are re-written</span></span></span>
<span class="r-in"><span><span class="co"># note that it warns for the two files that already exist</span></span></span>
<span class="r-in"><span><span class="co"># as these two are overwritten</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">idat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>, hp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">hp</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>, hp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">109</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">hp</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>, hp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">hp</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">testimp4</span> <span class="op">&lt;-</span> <span class="fu">prepareMplusData</span><span class="op">(</span><span class="va">idat2</span>, <span class="st">"testi4.dat"</span>,</span></span>
<span class="r-in"><span>  writeData <span class="op">=</span> <span class="st">"ifmissing"</span>, hashfilename<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  imputed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Hallquist, Joshua Wiley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

